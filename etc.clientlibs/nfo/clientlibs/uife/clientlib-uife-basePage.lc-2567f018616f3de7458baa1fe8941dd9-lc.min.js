/*******************************************************************************
 * Copyright 2017 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
if (window.Element && !Element.prototype.closest) {
    // eslint valid-jsdoc: "off"
    Element.prototype.closest =
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var el      = this;
            var i;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) {
                    // continue
                }
            } while ((i < 0) && (el = el.parentElement));
            return el;
        };
}

if (window.Element && !Element.prototype.matches) {
    Element.prototype.matches =
        Element.prototype.matchesSelector ||
        Element.prototype.mozMatchesSelector ||
        Element.prototype.msMatchesSelector ||
        Element.prototype.oMatchesSelector ||
        Element.prototype.webkitMatchesSelector ||
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var i       = matches.length;
            while (--i >= 0 && matches.item(i) !== this) {
                // continue
            }
            return i > -1;
        };
}

if (!Object.assign) {
    Object.assign = function(target, varArgs) { // .length of function is 2
        "use strict";
        if (target === null) {
            throw new TypeError("Cannot convert undefined or null to object");
        }

        var to = Object(target);

        for (var index = 1; index < arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource !== null) {
                for (var nextKey in nextSource) {
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    };
}

(function(arr) {
    "use strict";
    arr.forEach(function(item) {
        if (Object.prototype.hasOwnProperty.call(item, "remove")) {
            return;
        }
        Object.defineProperty(item, "remove", {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function remove() {
                this.parentNode.removeChild(this);
            }
        });
    });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

/*******************************************************************************
 * Copyright 2022 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function(document) {
    "use strict";

    window.CMP = window.CMP || {};
    window.CMP.utils = (function() {
        var NS = "cmp";

        /**
         * Reads options data from the Component wrapper element, defined via {@code data-cmp-*} data attributes
         *
         * @param {HTMLElement} element The component element to read options data from
         * @param {String} is The component identifier
         * @returns {String[]} The options read from the component data attributes
         */
        var readData = function(element, is) {
            var data = element.dataset;
            var options = [];
            var capitalized = is;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var reserved = ["is", "hook" + capitalized];

            for (var key in data) {
                if (Object.prototype.hasOwnProperty.call(data, key)) {
                    var value = data[key];

                    if (key.indexOf(NS) === 0) {
                        key = key.slice(NS.length);
                        key = key.charAt(0).toLowerCase() + key.substring(1);

                        if (reserved.indexOf(key) === -1) {
                            options[key] = value;
                        }
                    }
                }
            }
            return options;
        };

        /**
         * Set up the final properties of a component by evaluating the transform function or fall back to the default value on demand
         * @param {String[]} options the options to transform
         * @param {Object} properties object of properties of property functions
         * @returns {Object} transformed properties
         */
        var setupProperties = function(options, properties) {
            var transformedProperties = {};

            for (var key in properties) {
                if (Object.prototype.hasOwnProperty.call(properties, key)) {
                    var property = properties[key];
                    if (options && options[key] != null) {
                        if (property && typeof property.transform === "function") {
                            transformedProperties[key] = property.transform(options[key]);
                        } else {
                            transformedProperties[key] = options[key];
                        }
                    } else {
                        transformedProperties[key] = properties[key]["default"];
                    }
                }
            }
            return transformedProperties;
        };


        return {
            readData: readData,
            setupProperties: setupProperties
        };
    }());
}(window.document));

/*******************************************************************************
 * Copyright 2022 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function(document) {
    "use strict";

    window.CMP = window.CMP || {};
    window.CMP.image = window.CMP.image || {};
    window.CMP.image.dynamicMedia = (function() {
        var autoSmartCrops = {};
        var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";
        var SRC_URI_TEMPLATE_DPR_VAR = "{dpr}";
        var SRC_URI_DPR_OFF = "dpr=off";
        var SRC_URI_DPR_ON = "dpr=on,{dpr}";
        var dpr = window.devicePixelRatio || 1;
        var config = {
            minWidth: 20
        };

        /**
         * get auto smart crops from dm
         * @param {String} src the src uri
         * @returns {{}} the smart crop json object
         */
        var getAutoSmartCrops = function(src) {
            var request = new XMLHttpRequest();
            var url = src.split(SRC_URI_TEMPLATE_WIDTH_VAR)[0] + "?req=set,json";
            request.open("GET", url, false);
            request.onload = function() {
                if (request.status >= 200 && request.status < 400) {
                    // success status
                    var responseText = request.responseText;
                    var rePayload = new RegExp(/^(?:\/\*jsonp\*\/)?\s*([^()]+)\(([\s\S]+),\s*"[0-9]*"\);?$/gmi);
                    var rePayloadJSON = new RegExp(/^{[\s\S]*}$/gmi);
                    var resPayload = rePayload.exec(responseText);
                    var payload;
                    if (resPayload) {
                        var payloadStr = resPayload[2];
                        if (rePayloadJSON.test(payloadStr)) {
                            payload = JSON.parse(payloadStr);
                        }

                    }
                    // check "relation" - only in case of smartcrop preset
                    if (payload && payload.set.relation && payload.set.relation.length > 0) {
                        for (var i = 0; i < payload.set.relation.length; i++) {
                            autoSmartCrops[parseInt(payload.set.relation[i].userdata.SmartCropWidth)] =
                                ":" + payload.set.relation[i].userdata.SmartCropDef;
                        }
                    }
                } else {
                    // error status
                }
            };
            request.send();
            return autoSmartCrops;
        };

        /**
         * Build and return the srcset value based on the available auto smart crops
         * @param {String} src the src uri
         * @param {Object} smartCrops the smart crops object
         * @returns {String} the srcset
         */
        var getSrcSet = function(src, smartCrops) {
            var srcset;
            var keys = Object.keys(smartCrops);
            if (keys.length > 0) {
                srcset = [];
                for (var key in autoSmartCrops) {
                    srcset.push(src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, smartCrops[key]) + " " + key + "w");
                }
            }
            return  srcset.join(",");
        };

        /**
         * Get the optimal width based on the available sizes
         * @param {[Number]} sizes the available sizes
         * @param {Number} width the element width
         * @returns {String} the optimal width
         */
        function getOptimalWidth(sizes, width) {
            var len = sizes.length;
            var key = 0;

            while ((key < len - 1) && (sizes[key] < width)) {
                key++;
            }

            return sizes[key] !== undefined ? sizes[key].toString() : width;
        }

        /**
         * Get the width of an element or parent element if the width is smaller than the minimum width
         * @param {HTMLElement} component the image component
         * @param {HTMLElement | Node} parent the parent element
         * @returns {Number} the width of the element
         */
        var getWidth = function(component, parent) {
            var width = component.offsetWidth;
            while (width < config.minWidth && parent && !component._autoWidth) {
                width =  parent.offsetWidth;
                parent = parent.parentNode;
            }
            return width;
        };

        /**
         * Set the src and srcset attribute for a Dynamic Media Image which auto smart crops enabled.
         * @param {HTMLElement} component the image component
         * @param {{}} properties the component properties
         */
        var setDMAttributes = function(component, properties) {
            // for v3 we first have to turn the dpr on
            var src = properties.src.replace(SRC_URI_DPR_OFF, SRC_URI_DPR_ON);
            src = src.replace(SRC_URI_TEMPLATE_DPR_VAR, dpr);
            var smartCrops = {};
            var width;
            if (properties["smartcroprendition"] === "SmartCrop:Auto") {
                smartCrops = getAutoSmartCrops(src);
            }
            var hasWidths = (properties.widths && properties.widths.length > 0) || Object.keys(smartCrops).length > 0;
            if (hasWidths) {
                var image = component.querySelector("img");
                var elemWidth = getWidth(component, component.parentNode);
                if (properties["smartcroprendition"] === "SmartCrop:Auto") {
                    image.setAttribute("srcset", CMP.image.dynamicMedia.getSrcSet(src, smartCrops));
                    width = getOptimalWidth(Object.keys(smartCrops, elemWidth));
                    image.setAttribute("src", CMP.image.dynamicMedia.getSrc(src, smartCrops[width]));
                } else {
                    width = getOptimalWidth(properties.widths, elemWidth);
                    image.setAttribute("src", CMP.image.dynamicMedia.getSrc(src, width));
                }
            }
        };

        /**
         * Get the src attribute based on the optimal width
         * @param {String} src the src uri
         * @param {String} width the element width
         * @returns {String} the final src attribute
         */
        var getSrc = function(src, width) {
            if (src.indexOf(SRC_URI_TEMPLATE_WIDTH_VAR) > -1) {
                src = src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, width);
            }
            return src;
        };


        return {
            getAutoSmartCrops: getAutoSmartCrops,
            getSrcSet: getSrcSet,
            getSrc: getSrc,
            setDMAttributes: setDMAttributes,
            getWidth: getWidth
        };
    }());
    document.dispatchEvent(new CustomEvent("core.wcm.components.commons.site.image.dynamic-media.loaded"));
}(window.document));

/*******************************************************************************
 * Copyright 2016 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "image";

    var EMPTY_PIXEL = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
    var LAZY_THRESHOLD_DEFAULT = 0;
    var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";
    var SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY = "width={width}";
    var SRC_URI_TEMPLATE_DPR_VAR = "{dpr}";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        image: '[data-cmp-hook-image="image"]',
        map: '[data-cmp-hook-image="map"]',
        area: '[data-cmp-hook-image="area"]'
    };

    var lazyLoader = {
        "cssClass": "cmp-image__image--is-loading",
        "style": {
            "height": 0,
            "padding-bottom": "" // will be replaced with % ratio
        }
    };

    var properties = {
        /**
         * An array of alternative image widths (in pixels).
         * Used to replace a {.width} variable in the src property with an optimal width if a URI template is provided.
         *
         * @memberof Image
         * @type {Number[]}
         * @default []
         */
        "widths": {
            "default": [],
            "transform": function(value) {
                var widths = [];
                value.split(",").forEach(function(item) {
                    item = parseFloat(item);
                    if (!isNaN(item)) {
                        widths.push(item);
                    }
                });
                return widths;
            }
        },
        /**
         * Indicates whether the image should be rendered lazily.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "lazy": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * Indicates image is DynamicMedia image.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "dmimage": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * The lazy threshold.
         * This is the number of pixels, in advance of becoming visible, when an lazy-loading image should begin
         * to load.
         *
         * @memberof Image
         * @type {Number}
         * @default 0
         */
        "lazythreshold": {
            "default": 0,
            "transform": function(value) {
                var val =  parseInt(value);
                if (isNaN(val)) {
                    return LAZY_THRESHOLD_DEFAULT;
                }
                return val;
            }
        },
        /**
         * The image source.
         *
         * Can be a simple image source, or a URI template representation that
         * can be variable expanded - useful for building an image configuration with an alternative width.
         * e.g. '/path/image.coreimg{.width}.jpeg/1506620954214.jpeg'
         *
         * @memberof Image
         * @type {String}
         */
        "src": {
            "transform": function(value) {
                return decodeURIComponent(value);
            }
        }
    };

    var devicePixelRatio = window.devicePixelRatio || 1;

    function Image(config) {
        var that = this;

        var smartCrops = {};

        var useAssetDelivery = false;
        var srcUriTemplateWidthVar = SRC_URI_TEMPLATE_WIDTH_VAR;

        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            // check if asset delivery is used
            if (config.options.src && config.options.src.indexOf(SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY) >= 0) {
                useAssetDelivery = true;
                srcUriTemplateWidthVar = SRC_URI_TEMPLATE_WIDTH_VAR_ASSET_DELIVERY;
            }

            that._properties = CMP.utils.setupProperties(config.options, properties);
            cacheElements(config.element);
            // check image is DM asset; if true try to make req=set
            if (config.options.src && Object.prototype.hasOwnProperty.call(config.options, "dmimage") && (config.options["smartcroprendition"] === "SmartCrop:Auto")) {
                smartCrops = CMP.image.dynamicMedia.getAutoSmartCrops(config.options.src);
            }

            if (!that._elements.noscript) {
                return;
            }

            that._elements.container = that._elements.link ? that._elements.link : that._elements.self;

            unwrapNoScript();

            if (that._properties.lazy) {
                addLazyLoader();
            }

            if (that._elements.map) {
                that._elements.image.addEventListener("load", onLoad);
            }

            window.addEventListener("resize", onWindowResize);
            ["focus", "click", "load", "transitionend", "animationend", "scroll"].forEach(function(name) {
                document.addEventListener(name, that.update);
            });

            that._elements.image.addEventListener("cmp-image-redraw", that.update);

            that._interSectionObserver = new IntersectionObserver(function(entries, interSectionObserver) {
                entries.forEach(function(entry) {
                    if (entry.intersectionRatio > 0) {
                        that.update();
                    }
                });
            });
            that._interSectionObserver.observe(that._elements.self);

            that.update();
        }

        function loadImage() {
            var hasWidths = (that._properties.widths && that._properties.widths.length > 0) || Object.keys(smartCrops).length > 0;
            var replacement;
            if (Object.keys(smartCrops).length > 0) {
                var optimalWidth = getOptimalWidth(Object.keys(smartCrops), false);
                replacement = smartCrops[optimalWidth];
            } else {
                replacement = hasWidths ? (that._properties.dmimage ? "" : ".") + getOptimalWidth(that._properties.widths, true) : "";
            }
            if (useAssetDelivery) {
                replacement = replacement !== "" ? ("width=" + replacement.substring(1)) : "";
            }
            var url = that._properties.src.replace(srcUriTemplateWidthVar, replacement);
            url = url.replace(SRC_URI_TEMPLATE_DPR_VAR, devicePixelRatio);

            var imgSrcAttribute = that._elements.image.getAttribute("src");

            if (url !== imgSrcAttribute) {
                if (imgSrcAttribute === null || imgSrcAttribute === EMPTY_PIXEL) {
                    that._elements.image.setAttribute("src", url);
                } else {
                    var urlTemplateParts = that._properties.src.split(srcUriTemplateWidthVar);
                    // check if image src was dynamically swapped meanwhile (e.g. by Target)
                    var isImageRefSame = imgSrcAttribute.startsWith(urlTemplateParts[0]);
                    if (isImageRefSame && urlTemplateParts.length > 1) {
                        isImageRefSame = imgSrcAttribute.endsWith(urlTemplateParts[urlTemplateParts.length - 1]);
                    }
                    if (isImageRefSame) {
                        that._elements.image.setAttribute("src", url);
                        if (!hasWidths) {
                            window.removeEventListener("scroll", that.update);
                        }
                    }
                }
            }
            if (that._lazyLoaderShowing) {
                that._elements.image.addEventListener("load", removeLazyLoader);
            }
            that._interSectionObserver.unobserve(that._elements.self);
        }

        function getOptimalWidth(widths, useDevicePixelRatio) {
            var container = that._elements.self;
            var containerWidth = container.clientWidth;
            while (containerWidth === 0 && container.parentNode) {
                container = container.parentNode;
                containerWidth = container.clientWidth;
            }

            var dpr = useDevicePixelRatio ? devicePixelRatio : 1;
            var optimalWidth = containerWidth * dpr;
            var len = widths.length;
            var key = 0;

            while ((key < len - 1) && (widths[key] < optimalWidth)) {
                key++;
            }

            return widths[key].toString();
        }

        function addLazyLoader() {
            var width = that._elements.image.getAttribute("width");
            var height = that._elements.image.getAttribute("height");

            if (width && height) {
                var ratio = (height / width) * 100;
                var styles = lazyLoader.style;

                styles["padding-bottom"] = ratio + "%";

                for (var s in styles) {
                    if (Object.prototype.hasOwnProperty.call(styles, s)) {
                        that._elements.image.style[s] = styles[s];
                    }
                }
            }
            that._elements.image.setAttribute("src", EMPTY_PIXEL);
            that._elements.image.classList.add(lazyLoader.cssClass);
            that._lazyLoaderShowing = true;
        }

        function unwrapNoScript() {
            var markup = decodeNoscript(that._elements.noscript.textContent.trim());
            var parser = new DOMParser();

            // temporary document avoids requesting the image before removing its src
            var temporaryDocument = parser.parseFromString(markup, "text/html");
            var imageElement = temporaryDocument.querySelector(selectors.image);
            imageElement.removeAttribute("src");
            that._elements.container.insertBefore(imageElement, that._elements.noscript);

            var mapElement = temporaryDocument.querySelector(selectors.map);
            if (mapElement) {
                that._elements.container.insertBefore(mapElement, that._elements.noscript);
            }

            that._elements.noscript.parentNode.removeChild(that._elements.noscript);
            if (that._elements.container.matches(selectors.image)) {
                that._elements.image = that._elements.container;
            } else {
                that._elements.image = that._elements.container.querySelector(selectors.image);
            }

            that._elements.map = that._elements.container.querySelector(selectors.map);
            that._elements.areas = that._elements.container.querySelectorAll(selectors.area);
        }

        function removeLazyLoader() {
            that._elements.image.classList.remove(lazyLoader.cssClass);
            for (var property in lazyLoader.style) {
                if (Object.prototype.hasOwnProperty.call(lazyLoader.style, property)) {
                    that._elements.image.style[property] = "";
                }
            }
            that._elements.image.removeEventListener("load", removeLazyLoader);
            that._lazyLoaderShowing = false;
        }

        function isLazyVisible() {
            if (that._elements.container.offsetParent === null) {
                return false;
            }

            var wt = window.pageYOffset;
            var wb = wt + document.documentElement.clientHeight;
            var et = that._elements.container.getBoundingClientRect().top + wt;
            var eb = et + that._elements.container.clientHeight;

            return eb >= wt - that._properties.lazythreshold && et <= wb + that._properties.lazythreshold;
        }

        function resizeAreas() {
            if (that._elements.areas && that._elements.areas.length > 0) {
                for (var i = 0; i < that._elements.areas.length; i++) {
                    var width = that._elements.image.width;
                    var height = that._elements.image.height;

                    if (width && height) {
                        var relcoords = that._elements.areas[i].dataset.cmpRelcoords;
                        if (relcoords) {
                            var relativeCoordinates = relcoords.split(",");
                            var coordinates = new Array(relativeCoordinates.length);

                            for (var j = 0; j < coordinates.length; j++) {
                                if (j % 2 === 0) {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * width);
                                } else {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * height);
                                }
                            }

                            that._elements.areas[i].coords = coordinates;
                        }
                    }
                }
            }
        }

        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                that._elements[key] = hook;
            }
        }

        function onWindowResize() {
            that.update();
            resizeAreas();
        }

        function onLoad() {
            resizeAreas();
        }

        that.update = function() {
            if (that._properties.lazy) {
                if (isLazyVisible()) {
                    loadImage();
                }
            } else {
                loadImage();
            }
        };

        if (config && config.element) {
            init(config);
        }
    }

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Image({ element: elements[i], options: CMP.utils.readData(elements[i], IS) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body             = document.querySelector("body");
        var observer         = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Image({ element: element, options: CMP.utils.readData(element, IS) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    var documentReady = document.readyState !== "loading" ? Promise.resolve() : new Promise(function(resolve) {
        document.addEventListener("DOMContentLoaded", resolve);
    });

    Promise.all([documentReady]).then(onDocumentReady);
    /*
        on drag & drop of the component into a parsys, noscript's content will be escaped multiple times by the editor which creates
        the DOM for editing; the HTML parser cannot be used here due to the multiple escaping
     */
    function decodeNoscript(text) {
        text = text.replace(/&(amp;)*lt;/g, "<");
        text = text.replace(/&(amp;)*gt;/g, ">");
        return text;
    }

})();


/*******************************************************************************
 * Copyright 2019 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

/**
 * Element.matches()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/matches#Polyfill
 */
if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
}

// eslint-disable-next-line valid-jsdoc
/**
 * Element.closest()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/closest#Polyfill
 */
if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
        "use strict";
        var el = this;
        if (!document.documentElement.contains(el)) {
            return null;
        }
        do {
            if (el.matches(s)) {
                return el;
            }
            el = el.parentElement || el.parentNode;
        } while (el !== null && el.nodeType === 1);
        return null;
    };
}

/*******************************************************************************
 * Copyright 2019 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var containerUtils = window.CQ && window.CQ.CoreComponents && window.CQ.CoreComponents.container && window.CQ.CoreComponents.container.utils ? window.CQ.CoreComponents.container.utils : undefined;
    if (!containerUtils) {
        // eslint-disable-next-line no-console
        console.warn("Accordion: container utilities at window.CQ.CoreComponents.container.utils are not available. This can lead to missing features. Ensure the core.wcm.components.commons.site.container client library is included on the page.");
    }
    var dataLayerEnabled;
    var dataLayer;
    var dataLayerName;
    var delay = 100;

    var NS = "cmp";
    var IS = "accordion";

    var keyCodes = {
        ENTER: 13,
        SPACE: 32,
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var cssClasses = {
        button: {
            disabled: "cmp-accordion__button--disabled",
            expanded: "cmp-accordion__button--expanded"
        },
        panel: {
            hidden: "cmp-accordion__panel--hidden",
            expanded: "cmp-accordion__panel--expanded"
        }
    };

    var dataAttributes = {
        item: {
            expanded: "data-cmp-expanded"
        }
    };

    var properties = {
        /**
         * Determines whether a single accordion item is forced to be expanded at a time.
         * Expanding one item will collapse all others.
         *
         * @memberof Accordion
         * @type {Boolean}
         * @default false
         */
        "singleExpansion": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        }
    };

    /**
     * Accordion Configuration.
     *
     * @typedef {Object} AccordionConfig Represents an Accordion configuration
     * @property {HTMLElement} element The HTMLElement representing the Accordion
     * @property {Object} options The Accordion options
     */

    /**
     * Accordion.
     *
     * @class Accordion
     * @classdesc An interactive Accordion component for toggling panels of related content
     * @param {AccordionConfig} config The Accordion configuration
     */
    function Accordion(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Accordion.
         *
         * @private
         * @param {AccordionConfig} config The Accordion configuration
         */
        function init(config) {
            that._config = config;

            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            if (that._elements["item"]) {
                // ensures multiple element types are arrays.
                that._elements["item"] = Array.isArray(that._elements["item"]) ? that._elements["item"] : [that._elements["item"]];
                that._elements["button"] = Array.isArray(that._elements["button"]) ? that._elements["button"] : [that._elements["button"]];
                that._elements["panel"] = Array.isArray(that._elements["panel"]) ? that._elements["panel"] : [that._elements["panel"]];

                if (that._properties.singleExpansion) {
                    var expandedItems = getExpandedItems();
                    // multiple expanded items annotated, display the last item open.
                    if (expandedItems.length > 1) {
                        toggle(expandedItems.length - 1);
                    }
                }

                refreshItems();
                bindEvents();
                scrollToDeepLinkIdInAccordion();
            }
            if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                /*
                 * Editor message handling:
                 * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                 * - check that the message data panel container type is correct and that the id (path) matches this specific Accordion component
                 * - if so, route the "navigate" operation to enact a navigation of the Accordion based on index data
                 */
                window.CQ.CoreComponents.MESSAGE_CHANNEL = window.CQ.CoreComponents.MESSAGE_CHANNEL || new window.Granite.author.MessageChannel("cqauthor", window);
                window.CQ.CoreComponents.MESSAGE_CHANNEL.subscribeRequestMessage("cmp.panelcontainer", function(message) {
                    if (message.data && message.data.type === "cmp-accordion" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                        if (message.data.operation === "navigate") {
                            // switch to single expansion mode when navigating in edit mode.
                            var singleExpansion = that._properties.singleExpansion;
                            that._properties.singleExpansion = true;
                            toggle(message.data.index);

                            // revert to the configured state.
                            that._properties.singleExpansion = singleExpansion;
                        }
                    }
                });
            }
        }

        /**
         * Displays the panel containing the element that corresponds to the deep link in the URI fragment
         * and scrolls the browser to this element.
         */
        function scrollToDeepLinkIdInAccordion() {
            if (containerUtils) {
                var deepLinkItemIdx = containerUtils.getDeepLinkItemIdx(that, "item", "item");
                if (deepLinkItemIdx > -1) {
                    var deepLinkItem = that._elements["item"][deepLinkItemIdx];
                    if (deepLinkItem && !deepLinkItem.hasAttribute(dataAttributes.item.expanded)) {
                        // if single expansion: close all accordion items
                        if (that._properties.singleExpansion) {
                            for (var j = 0; j < that._elements["item"].length; j++) {
                                if (that._elements["item"][j].hasAttribute(dataAttributes.item.expanded)) {
                                    setItemExpanded(that._elements["item"][j], false, true);
                                }
                            }
                        }
                        // expand the accordion item containing the deep link
                        setItemExpanded(deepLinkItem, true, true);
                    }
                    var hashId = window.location.hash.substring(1);
                    if (hashId) {
                        var hashItem = document.querySelector("[id='" + hashId + "']");
                        if (hashItem) {
                            hashItem.scrollIntoView();
                        }
                    }
                }
            }
        }

        /**
         * Caches the Accordion elements as defined via the {@code data-accordion-hook="ELEMENT_NAME"} markup API.
         *
         * @private
         * @param {HTMLElement} wrapper The Accordion wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                if (hook.closest("." + NS + "-" + IS) === that._elements.self) { // only process own accordion elements
                    var capitalized = IS;
                    capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                    var key = hook.dataset[NS + "Hook" + capitalized];
                    if (that._elements[key]) {
                        if (!Array.isArray(that._elements[key])) {
                            var tmp = that._elements[key];
                            that._elements[key] = [tmp];
                        }
                        that._elements[key].push(hook);
                    } else {
                        that._elements[key] = hook;
                    }
                }
            }
        }

        /**
         * Sets up properties for the Accordion based on the passed options.
         *
         * @private
         * @param {Object} options The Accordion options
         */
        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (Object.prototype.hasOwnProperty.call(properties, key)) {
                    var property = properties[key];
                    var value = null;

                    if (options && options[key] != null) {
                        value = options[key];

                        // transform the provided option
                        if (property && typeof property.transform === "function") {
                            value = property.transform(value);
                        }
                    }

                    if (value === null) {
                        // value still null, take the property default
                        value = properties[key]["default"];
                    }

                    that._properties[key] = value;
                }
            }
        }

        /**
         * Binds Accordion event handling.
         *
         * @private
         */
        function bindEvents() {
            window.addEventListener("hashchange", scrollToDeepLinkIdInAccordion, false);
            var buttons = that._elements["button"];
            if (buttons) {
                for (var i = 0; i < buttons.length; i++) {
                    (function(index) {
                        buttons[i].addEventListener("click", function(event) {
                            toggle(index);
                            focusButton(index);
                        });
                        buttons[i].addEventListener("keydown", function(event) {
                            onButtonKeyDown(event, index);
                        });
                    })(i);
                }
            }
        }

        /**
         * Handles button keydown events.
         *
         * @private
         * @param {Object} event The keydown event
         * @param {Number} index The index of the button triggering the event
         */
        function onButtonKeyDown(event, index) {
            var lastIndex = that._elements["button"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        focusButton(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        focusButton(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    focusButton(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    focusButton(lastIndex);
                    break;
                case keyCodes.ENTER:
                case keyCodes.SPACE:
                    event.preventDefault();
                    toggle(index);
                    focusButton(index);
                    break;
                default:
                    return;
            }
        }

        /**
         * General handler for toggle of an item.
         *
         * @private
         * @param {Number} index The index of the item to toggle
         */
        function toggle(index) {
            var item = that._elements["item"][index];
            if (item) {
                if (that._properties.singleExpansion) {
                    // ensure only a single item is expanded if single expansion is enabled.
                    for (var i = 0; i < that._elements["item"].length; i++) {
                        if (that._elements["item"][i] !== item) {
                            var expanded = getItemExpanded(that._elements["item"][i]);
                            if (expanded) {
                                setItemExpanded(that._elements["item"][i], false);
                            }
                        }
                    }
                }
                setItemExpanded(item, !getItemExpanded(item));

                if (dataLayerEnabled) {
                    var accordionId = that._elements.self.id;
                    var expandedItems = getExpandedItems()
                        .map(function(item) {
                            return getDataLayerId(item);
                        });

                    var uploadPayload = { component: {} };
                    uploadPayload.component[accordionId] = { shownItems: expandedItems };

                    var removePayload = { component: {} };
                    removePayload.component[accordionId] = { shownItems: undefined };

                    dataLayer.push(removePayload);
                    dataLayer.push(uploadPayload);
                }
            }
        }

        /**
         * Sets an item's expanded state based on the provided flag and refreshes its internals.
         *
         * @private
         * @param {HTMLElement} item The item to mark as expanded, or not expanded
         * @param {Boolean} expanded true to mark the item expanded, false otherwise
         * @param {Boolean} keepHash true to keep the hash in the URL, false to update it
         */
        function setItemExpanded(item, expanded, keepHash) {
            if (expanded) {
                item.setAttribute(dataAttributes.item.expanded, "");
                var index = that._elements["item"].indexOf(item);
                if (!keepHash && containerUtils) {
                    containerUtils.updateUrlHash(that, "item", index);
                }
                if (dataLayerEnabled) {
                    dataLayer.push({
                        event: "cmp:show",
                        eventInfo: {
                            path: "component." + getDataLayerId(item)
                        }
                    });
                }

            } else {
                item.removeAttribute(dataAttributes.item.expanded);
                if (!keepHash && containerUtils) {
                    containerUtils.removeUrlHash();
                }
                if (dataLayerEnabled) {
                    dataLayer.push({
                        event: "cmp:hide",
                        eventInfo: {
                            path: "component." + getDataLayerId(item)
                        }
                    });
                }
            }
            refreshItem(item);
        }

        /**
         * Gets an item's expanded state.
         *
         * @private
         * @param {HTMLElement} item The item for checking its expanded state
         * @returns {Boolean} true if the item is expanded, false otherwise
         */
        function getItemExpanded(item) {
            return item && item.dataset && item.dataset["cmpExpanded"] !== undefined;
        }

        /**
         * Refreshes an item based on its expanded state.
         *
         * @private
         * @param {HTMLElement} item The item to refresh
         */
        function refreshItem(item) {
            var expanded = getItemExpanded(item);
            if (expanded) {
                expandItem(item);
            } else {
                collapseItem(item);
            }
        }

        /**
         * Refreshes all items based on their expanded state.
         *
         * @private
         */
        function refreshItems() {
            for (var i = 0; i < that._elements["item"].length; i++) {
                refreshItem(that._elements["item"][i]);
            }
        }

        /**
         * Returns all expanded items.
         *
         * @private
         * @returns {HTMLElement[]} The expanded items
         */
        function getExpandedItems() {
            var expandedItems = [];

            for (var i = 0; i < that._elements["item"].length; i++) {
                var item = that._elements["item"][i];
                var expanded = getItemExpanded(item);
                if (expanded) {
                    expandedItems.push(item);
                }
            }

            return expandedItems;
        }

        /**
         * Annotates the item and its internals with
         * the necessary style and accessibility attributes to indicate it is expanded.
         *
         * @private
         * @param {HTMLElement} item The item to annotate as expanded
         */
        function expandItem(item) {
            var index = that._elements["item"].indexOf(item);
            if (index > -1) {
                var button = that._elements["button"][index];
                var panel = that._elements["panel"][index];
                button.classList.add(cssClasses.button.expanded);
                // used to fix some known screen readers issues in reading the correct state of the 'aria-expanded' attribute
                // e.g. https://bugs.webkit.org/show_bug.cgi?id=210934
                setTimeout(function() {
                    button.setAttribute("aria-expanded", true);
                }, delay);
                panel.classList.add(cssClasses.panel.expanded);
                panel.classList.remove(cssClasses.panel.hidden);
                panel.setAttribute("aria-hidden", false);
            }
        }

        /**
         * Annotates the item and its internals with
         * the necessary style and accessibility attributes to indicate it is not expanded.
         *
         * @private
         * @param {HTMLElement} item The item to annotate as not expanded
         */
        function collapseItem(item) {
            var index = that._elements["item"].indexOf(item);
            if (index > -1) {
                var button = that._elements["button"][index];
                var panel = that._elements["panel"][index];
                button.classList.remove(cssClasses.button.expanded);
                // used to fix some known screen readers issues in reading the correct state of the 'aria-expanded' attribute
                // e.g. https://bugs.webkit.org/show_bug.cgi?id=210934
                setTimeout(function() {
                    button.setAttribute("aria-expanded", false);
                }, delay);
                panel.classList.add(cssClasses.panel.hidden);
                panel.classList.remove(cssClasses.panel.expanded);
                panel.setAttribute("aria-hidden", true);
            }
        }

        /**
         * Focuses the button at the provided index.
         *
         * @private
         * @param {Number} index The index of the button to focus
         */
        function focusButton(index) {
            var button = that._elements["button"][index];
            button.focus();
        }
    }

    /**
     * Reads options data from the Accordion wrapper element, defined via {@code data-cmp-*} data attributes.
     *
     * @private
     * @param {HTMLElement} element The Accordion element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (Object.prototype.hasOwnProperty.call(data, key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Parses the dataLayer string and returns the ID
     *
     * @private
     * @param {HTMLElement} item the accordion item
     * @returns {String} dataLayerId or undefined
     */
    function getDataLayerId(item) {
        if (item) {
            if (item.dataset.cmpDataLayer) {
                return Object.keys(JSON.parse(item.dataset.cmpDataLayer))[0];
            } else {
                return item.id;
            }
        }
        return null;
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Accordion components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        dataLayerEnabled = document.body.hasAttribute("data-cmp-data-layer-enabled");
        if (dataLayerEnabled) {
            dataLayerName = document.body.getAttribute("data-cmp-data-layer-name") || "adobeDataLayer";
            dataLayer = window[dataLayerName] = window[dataLayerName] || [];
        }

        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Accordion({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Accordion({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

    if (containerUtils) {
        window.addEventListener("load", containerUtils.scrollToAnchor, false);
    }

}());


/*! For license information please see basePage.js.LICENSE.txt */
(()=>{var e,t={1285:(e,t,n)=>{"use strict";function s(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}n.d(t,{O:()=>d});var a=n(8975);function o(e,t){let n;return function(){const s=this,a=arguments;clearTimeout(n),n=setTimeout((()=>e.apply(s,a)),t)}}var i=n(5780);function r(e){if(!e)return null;const t=e.getBoundingClientRect(),n=window.scrollX,s=window.scrollY;return new DOMRect(t.left+n,t.top+s,t.width,t.height)}const l={searchOverlayIsEnabled:!1,isSearchResultsPage:!1,selectors:{globalNavSearchContainer:document.querySelector(".search-bar_global-nav"),pageSearchContainer:document.querySelector(".search-bar_page-component"),searchSuggestionItemsSelector:".search-bar__suggestions-item",searchInputSelector:".search-bar__search-input",searchElement:document.querySelector(".search-bar .search-bar__search"),globalNavInput:document.getElementById("q"),searchInputField:document.getElementsByClassName("search-bar__search-input"),searchResultsInput:document.getElementById("search-page-input"),suggestionsList:document.getElementsByClassName("search-bar__suggestions-list"),globalNavSubmitBtn:document.querySelector(".search-bar_global-nav .search-bar__search-btn"),searchSubmitButton:document.querySelector(".search-bar_page-component .search-bar__search-btn"),classSelectionsListActive:"search-bar__suggestions-list_active",idGlobalNavInputID:"q",idSearchResultsInputID:"search-page-input",idGlobalNavSuggestionsList:"global-nav-search-suggestions-list",idSearchResultsSuggestionsList:"page-component-search-suggestions-list",debounceRate:300,originalSearchQuery:""},addEventListeners(){const e=this.selectors.globalNavSearchContainer?.querySelector(this.selectors.searchInputSelector),t=this.selectors.pageSearchContainer?.querySelector(this.selectors.searchInputSelector);[e,t].forEach(((e,t)=>{e?.addEventListener("input",o((()=>{this.buildSuggestionsList(t)}),this.selectors.debounceRate))}));const n=this.selectors.suggestionsList[0],s=this.selectors.suggestionsList[1];e?.addEventListener("keydown",(e=>{this.handleInputFieldKeys(e),this.updateInputValue(e,n)})),t?.addEventListener("keydown",(e=>{this.handleInputFieldKeys(e),this.updateInputValue(e,s)})),n.addEventListener("keydown",(e=>{const t=e;t.preventDefault(),this.handleSuggestionsListKeys(t,n),this.updateInputValue(t,n),"Enter"===t.code&&this.selectors.globalNavSubmitBtn.click()})),s?.addEventListener("keydown",(e=>{const t=e;t.preventDefault(),this.handleSuggestionsListKeys(t,s),this.updateInputValue(t,s),"Enter"===t.code&&this.selectors.searchSubmitButton.click()})),s?.addEventListener("click",(e=>{this.handleResultsSuggestionsListItemClick(e)})),n?.addEventListener("click",(e=>{this.handleNavSuggestionsListItemClick(e)})),window.addEventListener("resize",o((()=>{this.closeAllSuggestionsLists()}),500))},handleResultsSuggestionsListItemClick(e){this.selectors.searchResultsInput.value=e.target.innerText,this.selectors.searchSubmitButton.click()},handleNavSuggestionsListItemClick(e){this.selectors.globalNavInput.value=e.target.innerText,this.selectors.globalNavSubmitBtn.click()},async buildSuggestionsList(e){let t;const n=this.selectors.searchInputField[e];this.isSearchResultsPage="search-page-input"===n.id;let s=a.W.sanitize(n.value).toLowerCase();if(n.value.length>=2){if(t=await this.fetchSearchData(s),!t.length)return;document.addEventListener("click",(e=>{this.handleCloseOnClick(e)}),{once:!0});const o=document.querySelectorAll(".search-bar__search-error");for(const e of o)null!==e&&e.classList.remove("search-bar__search-error_visible");if(this.selectors.suggestionsList[e].innerHTML="",this.selectors.suggestionsList[e].classList.add(this.selectors.classSelectionsListActive),this.selectors.searchInputField[e].setAttribute("aria-expanded","true"),this.addEmptyAriaAttr(this.selectors.searchInputField[e]),t.forEach(((t,n)=>{n+=1;let o=a.W.sanitize(t.Display),i=this.highlightSearch(s,o);this.selectors.suggestionsList[e].innerHTML+=`<li id="suggestion-${n}" class="search-bar__suggestions-item" aria-selected="false" role="option" tabindex="-1"><span class="search-bar__suggestions-item-text">${i}</span></li>`})),this.updatingAriaLabelForListbox(e,t),this.searchOverlayIsEnabled){const e=r(n.closest(".container"));i.p.turnOverlayOn(this.isSearchResultsPage,e?.bottom?`${e.bottom}px`:null)}}else this.closeAllSuggestionsLists()},updatingAriaLabelForListbox(e,t){this.selectors.suggestionsList[e].setAttribute("aria-label",`${t.length} suggested searches`)},closeAllSuggestionsLists(){for(const e of this.selectors.suggestionsList)e.innerHTML="",e.classList.remove(this.selectors.classSelectionsListActive),e.removeAttribute("aria-label");for(const e of this.selectors.searchInputField)e.setAttribute("aria-expanded","false");const e=window.innerWidth<780,t=!e;if(this.searchOverlayIsEnabled&&((e||this.isSearchResultsPage)&&i.p.removeOverlays(),t&&!this.isSearchResultsPage)){"flex"!==i.p.getSearchFormWrapperDisplayValue()&&i.p.removeOverlays()}},async fetchSearchData(e){const t=this.selectors.searchElement.dataset.host;return(await fetch(`${t}/xsuggest?type=json&sq=nfcusuggestquery&text=${e}`)).json()},updateAriaControls(e,t,n){e?.classList.add("highlight"),e?.setAttribute("aria-selected","true"),t?this.selectors.globalNavInput?.setAttribute("aria-activedescendant",e?.id):n&&this.selectors.searchResultsInput?.setAttribute("aria-activedescendant",e?.id)},focusOnSubmitBtn(e,t){e?this.selectors.globalNavSubmitBtn.focus():t&&this.selectors.searchSubmitButton.focus()},getFirstSuggestionAnchorEl(e,t){let n;return e?n=document.querySelector(".search-bar_global-nav .search-bar__suggestions-list_active .search-bar__suggestions-item"):t&&(n=document.querySelector(".search-bar_page-component .search-bar__suggestions-list_active .search-bar__suggestions-item")),n},getSearchInputElement(e,t){let n;return e?n=this.selectors.globalNavInput:t&&(n=this.selectors.searchResultsInput),n},getOriginalSearchTerms(e,t){let n;return e?n=this.selectors.globalNavInput?.value:t&&(n=this.selectors.searchResultsInput?.value),n},getSuggestionsListListItems(e,t){let n;return e?n=this.selectors.globalNavSearchContainer?.querySelectorAll(this.selectors.searchSuggestionItemsSelector):t&&(n=this.selectors.pageSearchContainer?.querySelectorAll(this.selectors.searchSuggestionItemsSelector)),n},setSearchFieldInputValue(e,t,n){let s;s=""===e?"":e.length&&t?t?.textContent:e,null!=n&&(n.value=s||"")},getFirstListElement(e,t){let n;return e?n=document.querySelector(".search-bar_global-nav .search-bar__suggestions-list_active li"):t&&(n=document.querySelector(".search-bar_page-component .search-bar__suggestions-list_active li")),n},getOriginalSearchQuery(e,t){let n;const s=this.getSearchInputElement(e,t);return n=s?.value,n},setOriginalSearchQuery(e){this.selectors.originalSearchQuery=e},handleInputFieldKeys(e){const t=e.target.id===this.selectors.idGlobalNavInputID,n=e.target.id===this.selectors.idSearchResultsInputID;if(e.shiftKey||"Tab"!==e.code||(e.preventDefault(),this.focusOnSubmitBtn(t,n),setTimeout((()=>{this.closeAllSuggestionsLists()}),this.selectors.debounceRate)),"ArrowDown"===e.code){const s=this.getFirstSuggestionAnchorEl(t,n),a=this.getOriginalSearchQuery(t,n);void 0!==a&&this.setOriginalSearchQuery(a),s?.focus();const o=this.getSearchInputElement(t,n),i=this.getOriginalSearchTerms(t,n);e.preventDefault(),i&&o&&this.setSearchFieldInputValue(i,s,o);const r=this.getFirstListElement(t,n);null!=r&&this.updateAriaControls(r,t,n)}},focusOnTheNextSiblingEl(){const e=document.activeElement?.nextSibling;e?.focus()},focusOnInputEl(e,t){const n=this.getSearchInputElement(e,t);n?.focus()},removeSuggestionListHighlightAndAria(e,t){const n=this.getSuggestionsListListItems(e,t);if(null!=n)for(const e of n)e.classList.remove("highlight"),e.setAttribute("aria-selected","false")},addSuggestionListHighlightAndAria(e,t){const n=document.activeElement;null!=n&&this.updateAriaControls(n,e,t)},focusOnthePreviousSiblingEl(){const e=document.activeElement?.previousSibling;e.focus()},handleSuggestionsListKeys(e,t){const n=t.id===this.selectors.idGlobalNavSuggestionsList,s=t.id===this.selectors.idSearchResultsSuggestionsList;if("Escape"===e.code){this.closeAllSuggestionsLists(),this.focusOnInputEl(n,s);const e=this.selectors.originalSearchQuery,t=this.getSearchInputElement(n,s);null!=t&&(t.value=e)}if("Tab"===e.code&&(e.preventDefault(),this.closeAllSuggestionsLists(),this.focusOnSubmitBtn(n,s)),"ArrowDown"===e.code&&(e.preventDefault(),this.focusOnTheNextSiblingEl(),this.removeSuggestionListHighlightAndAria(n,s),this.addSuggestionListHighlightAndAria(n,s)),"ArrowUp"===e.code){const t=document.activeElement?.previousSibling;t?(e.preventDefault(),this.focusOnthePreviousSiblingEl(),this.addSuggestionListHighlightAndAria(n,s)):this.focusOnInputEl(n,s)}},addEmptyAriaAttr(e){e.removeAttribute("aria-activedescendant")},updateInputValue(e,t){const n=t.id===this.selectors.idGlobalNavSuggestionsList,s=t.id===this.selectors.idSearchResultsSuggestionsList;if("ArrowUp"===e.code||"ArrowDown"===e.code){const e=this.getSearchInputElement(n,s);null!=e&&(e.value=document.activeElement?.textContent||"",document.activeElement?.classList.contains("search-bar__search-input")&&(e.value=this.selectors.originalSearchQuery,this.addEmptyAriaAttr(e)))}},handleCloseOnClick(e){for(const t of this.selectors.suggestionsList){let n=t.classList.contains(this.selectors.classSelectionsListActive);e.target!==t&&n&&this.closeAllSuggestionsLists()}},highlightSearch(e,t){if(t.indexOf(e)>=0){let n=t.split("");return n.splice(t.indexOf(e),0,"<strong>"),n.splice(t.indexOf(e)+e.length+1,0,"</strong>"),n.join("")}return t},init(){this.searchOverlayIsEnabled=i.p.searchOverlayEnabled,this.addEventListeners()}};function c(e){!function(e){sessionStorage?.setItem("pageTitle",e)}(document.title);const t=e.target,n=t.querySelector(".search-bar__search-input"),s=document.querySelectorAll(".search-bar__search-error");for(const e of s)null!==e&&e.classList.remove("search-bar__search-error_visible");if(""===n?.value){e.preventDefault(),n.setAttribute("aria-invalid","true");const s=function(e,t){const n=e.nextElementSibling;return!t||n&&n.matches(t)?n:null}(t,".search-bar__search-error");if(null===s)return void(n.required=!0);s.classList.add("search-bar__search-error_visible"),s.focus()}}const d={selectors:{globalNav:document.querySelector(".global-nav"),classExtraLinksFadeStyles:"search-bar__extra-links-container_fade-styles",classExtraLinksBlock:"search-bar__extra-links-container_display_block",extraLinks:document.getElementsByClassName("search-bar__extra-links-container")[0],searchInput:document.getElementById("q"),searchResultsInput:document.getElementById("search-page-input"),globalHeaderSearch:document.querySelector(".search-bar"),searchToggleElem:document.querySelector(".search-toggle")},handleSearchInputFocusIn(){this.selectors.searchInput?.addEventListener("focus",(()=>{const e=window.innerWidth<780;this.selectors.extraLinks&&e&&(this.selectors.extraLinks.classList.add(this.selectors.classExtraLinksFadeStyles),this.selectors.extraLinks.classList.add(this.selectors.classExtraLinksBlock))}))},handleShowOverlay(e){const{target:t}=e,n="search-page-input"===t.id;if(!(window.innerWidth<780)||n){const e=r(t.closest(".container"));i.p.turnOverlayOn(n,e?.bottom?`${e.bottom}px`:null)}},addEventListeners(){this.handleSearchInputFocusIn(),this.handleSearchToggleClicked(),this.handleShiftTabGlobalSearch()},openGlobalNavSearch(e){const t=document.querySelector(".search-bar");$(t).slideDown((function(){$(t).hasClass("search-bar search-bar_global-nav cmdr-v3")&&$(t).css("display","flex"),e.setAttribute("aria-label","Close Global Search"),e.setAttribute("aria-expanded","true"),e.classList.add("search-toggle_open"),e.innerHTML='<i class="search-close" aria-hidden="true"></i>';const n=t?.querySelector(".search-bar__search-input");n?.focus()}))},closeGlobalNavSearch(e,t){$(this.selectors.globalHeaderSearch).slideUp(),e.setAttribute("aria-label","Expand Global Search"),e.setAttribute("aria-expanded","false"),e.classList.remove("search-toggle_open"),e.innerHTML='<i class="fa fa-search" aria-hidden="true"></i>';const n=document.querySelector(".global-nav .search-form");n?.reset(),t&&i.p.removeOverlays()},handleSearchToggleClicked(){const e=i.p.searchOverlayEnabled;this.selectors.searchToggleElem?.addEventListener("click",(t=>{t.preventDefault(),null!==this.selectors.globalHeaderSearch&&s(this.selectors.globalHeaderSearch)?this.closeGlobalNavSearch(this.selectors.searchToggleElem,e):this.openGlobalNavSearch(this.selectors.searchToggleElem)}))},handleShiftTabGlobalSearch(){const e=i.p.searchOverlayEnabled;this.selectors.globalNav?.addEventListener("keydown",(t=>{const n=document.querySelector(".search-toggle_open"),a="Tab"===t.code&&t.shiftKey;null!==this.selectors.globalHeaderSearch&&s(this.selectors.globalHeaderSearch)&&a&&t.target===n&&this.closeGlobalNavSearch(this.selectors.searchToggleElem,e)}))},init(){const e=document.querySelector(".search-bar_global-nav .search-bar__search-form"),t=document.querySelector(".search-bar_page-component .search-bar__search-form"),n=document.querySelector(".global-nav"),s=void 0!==n?.dataset.enableSearchOverlay,a="true"===n?.dataset.enableSearchOverlay;s&&a&&i.p.init();i.p.searchOverlayEnabled&&this.selectors.searchInput?.addEventListener("focus",this.handleShowOverlay),null!=t&&t.addEventListener("submit",c),null!=e&&e.addEventListener("submit",c);const o=void 0!==n?.dataset.enableAutosuggest,r="true"===n?.dataset.enableAutosuggest;o&&r&&l.init(),this.addEventListeners()}}},1549:(e,t,n)=>{var s,a,o;!function(){"use strict";a=[n(1669)],s=function(e){var t=-1,n=-1,s=function(e){return parseFloat(e)||0},a=function(t){var n=1,a=e(t),o=null,i=[];return a.each((function(){var t=e(this),a=t.offset().top-s(t.css("margin-top")),r=i.length>0?i[i.length-1]:null;null===r?i.push(t):Math.floor(Math.abs(o-a))<=n?i[i.length-1]=r.add(t):i.push(t),o=a})),i},o=function(t){var n={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof t?e.extend(n,t):("boolean"==typeof t?n.byRow=t:"remove"===t&&(n.remove=!0),n)},i=e.fn.matchHeight=function(t){var n=o(t);if(n.remove){var s=this;return this.css(n.property,""),e.each(i._groups,(function(e,t){t.elements=t.elements.not(s)})),this}return this.length<=1&&!n.target||(i._groups.push({elements:this,options:n}),i._apply(this,n)),this};i.version="0.7.2",i._groups=[],i._throttle=80,i._maintainScroll=!1,i._beforeUpdate=null,i._afterUpdate=null,i._rows=a,i._parse=s,i._parseOptions=o,i._apply=function(t,n){var r=o(n),l=e(t),c=[l],d=e(window).scrollTop(),u=e("html").outerHeight(!0),h=l.parents().filter(":hidden");return h.each((function(){var t=e(this);t.data("style-cache",t.attr("style"))})),h.css("display","block"),r.byRow&&!r.target&&(l.each((function(){var t=e(this),n=t.css("display");"inline-block"!==n&&"flex"!==n&&"inline-flex"!==n&&(n="block"),t.data("style-cache",t.attr("style")),t.css({display:n,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})})),c=a(l),l.each((function(){var t=e(this);t.attr("style",t.data("style-cache")||"")}))),e.each(c,(function(t,n){var a=e(n),o=0;if(r.target)o=r.target.outerHeight(!1);else{if(r.byRow&&a.length<=1)return void a.css(r.property,"");a.each((function(){var t=e(this),n=t.attr("style"),s=t.css("display");"inline-block"!==s&&"flex"!==s&&"inline-flex"!==s&&(s="block");var a={display:s};a[r.property]="",t.css(a),t.outerHeight(!1)>o&&(o=t.outerHeight(!1)),n?t.attr("style",n):t.css("display","")}))}a.each((function(){var t=e(this),n=0;r.target&&t.is(r.target)||("border-box"!==t.css("box-sizing")&&(n+=s(t.css("border-top-width"))+s(t.css("border-bottom-width")),n+=s(t.css("padding-top"))+s(t.css("padding-bottom"))),t.css(r.property,o-n+"px"))}))})),h.each((function(){var t=e(this);t.attr("style",t.data("style-cache")||null)})),i._maintainScroll&&e(window).scrollTop(d/u*e("html").outerHeight(!0)),this},i._applyDataApi=function(){var t={};e("[data-match-height], [data-mh]").each((function(){var n=e(this),s=n.attr("data-mh")||n.attr("data-match-height");t[s]=s in t?t[s].add(n):n})),e.each(t,(function(){this.matchHeight(!0)}))};var r=function(t){i._beforeUpdate&&i._beforeUpdate(t,i._groups),e.each(i._groups,(function(){i._apply(this.elements,this.options)})),i._afterUpdate&&i._afterUpdate(t,i._groups)};i._update=function(s,a){if(a&&"resize"===a.type){var o=e(window).width();if(o===t)return;t=o}s?-1===n&&(n=setTimeout((function(){r(a),n=-1}),i._throttle)):r(a)},e(i._applyDataApi);var l=e.fn.on?"on":"bind";e(window)[l]("load",(function(e){i._update(!1,e)})),e(window)[l]("resize orientationchange",(function(e){i._update(!0,e)}))},void 0===(o="function"==typeof s?s.apply(t,a):s)||(e.exports=o)}()},1669:e=>{"use strict";e.exports=jQuery},2085:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var s=n(9418);class a{init(){if(!("$CQ"in self)){const e=document.createElement("style");e.id="antiClickjackStyle";const t=document.createTextNode("body{display:none !important;}");if(document.head.appendChild(e),e.appendChild(t),self===top){const t=document.getElementById(e.id);t.parentNode.removeChild(t)}else top.location.href=s.A.sanitize(self.location.href)}}}},2173:()=>{$.fn.extend({leanModal:function(e){return e=$.extend({closeButton:".modal_close, .externalURL, .content-modal"},e),this.each((function(){var t,n=e,s=!1;$(this).on("click",(function(e){function a(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}var o=a()&&a()<=9,i=$(this).attr("href");function r(e){if(s&&(!e.keyCode||27===e.keyCode)){o?($(i).removeClass("open").attr("aria-hidden","true"),"#signInHelp"===i&&$("#signInHelp iframe").removeAttr("src style")):($(i).addClass("animateOut"),setTimeout((function(){$(i).removeClass("animateOut open").attr("aria-hidden","true"),"#signInHelp"===i&&$("#signInHelp iframe").removeAttr("src style")}),1e3)),s=!1,t.focus();var n=$.Event("modalclose");$(window).trigger(n)}}t=document.activeElement,$(i).addClass("open").focus().attr("aria-hidden","false"),s=!0,$(".content-modal > section").on("click",(function(e){e.stopPropagation()})),$(n.closeButton).on("click",r),$(document).keyup(r),e.preventDefault(),$(i).keydown((function(e){var t,n,s,a,o,i;t=$(this),9===(n=e).which&&(s=t.find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),a=jQuery(":focus"),o=s.length,i=s.index(a),n.shiftKey?0===i&&(s.get(o-1).focus(),n.preventDefault()):i===o-1&&(s.get(0).focus(),n.preventDefault()))}))}))}))}})},3845:(e,t,n)=>{"use strict";var s=n(5904);n(1549);!function(){const e=$("a[href*=\\#]"),t=$(".compare-top");e.click((function(){const e=t.length&&$(window).height()>=376?t.outerHeight(!0):0,n=t.length?(0,s.w)()+e+20:(0,s.w)();if("#offsite"===$(this).attr("href"))return;let a=$(this.hash).offset();$("html, body").animate({scrollTop:a.top-n})}))}(),$(document).ready((function(){$("img").parent("a").addClass("contains-image"),$("picture").parent("a").addClass("contains-image")})),document.addEventListener("DOMContentLoaded",(function(){["load","resize"].forEach((function(e){window.addEventListener(e,(function(){$(".eqHeight, .egHeight2").length&&($(".eqHeight > *").matchHeight(),$(".eqHeight2 > section > article").matchHeight(),$.fn.matchHeight._maintainScroll=!0,window.innerWidth>779?$(".eqHeightstacked > *").matchHeight({byRow:!1}):$(".eqHeightstacked > *").matchHeight({byRow:!0}))}))}))}))},4244:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});const s="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function a(e="#exit-site-modal",t=`${e} .cmp-dialog__footer ul li a`,n=`${e} .cmp-dialog__header button`){function a(n){const s=n.getAttribute("data-href"),a=n.getAttribute("data-title"),o=n.getAttribute("title"),i=n.textContent,r=document.querySelector(t),l=n.closest(".image-ribbon-v2");r?.setAttribute("href",s);const c=r?.querySelector(".sr-only");c?.remove(),r?.insertAdjacentHTML("beforeend",`<span class="sr-only"> to ${i}</span>`);const d=document.querySelector(`${e} .cmp-dialog__subheader`);d?.insertAdjacentHTML("beforeend",'<p class="cmp-dialog__subheader_action-callout-sm"></p>');const u=document.querySelector(`${e} .cmp-dialog__subheader_action-callout-sm`);null!=u&&(u.textContent=`${l?function(e){try{const t=e.startsWith("http")?e:"http://"+e,n=new URL(t).hostname.split(".");return n.length>=2?n.slice(-2,-1)[0]:n}catch(e){return""}}(s):a||o||i||s} [Opens in a new window]`)}function o(e,t){let n=t?e.getAttribute("onclick"):e.href;if(null==n)return;n=n.split("?")[0],n.includes("location.href")&&(n=n.split("=")[1],n=n.replace(/['"]/g,""));const s=new URL(n).hostname;if(!function(e,t){if(null!=e.closest(".cmp-dialog"))return!0;const n=document.getElementById("excludesList")?.dataset.excludes;if(n){let e=n.split(",");for(const n of e)if(t.includes(n))return!0}}(e,s)){if(t)return e.removeAttribute("onclick"),void e.classList.add("addressClick");if(!n.includes(location.hostname)){e.addEventListener("click",(()=>(a(e),!1)));const t=e.getAttribute("href");if(null==t)return;e.setAttribute("data-href",t),e.setAttribute("href","#offSite"),e.setAttribute("data-modal","true"),e.classList.add("addressClick")}}}function i(a){a?.forEach((e=>{const t=e.getAttribute("onclick");t?.includes("location.href='http")?o(e,!0):o(e,!1)}));document.querySelectorAll("a[data-modal*=true").forEach((a=>{"#offSite"==a.getAttribute("href")&&a.addEventListener("click",(function(a){a.preventDefault();!function(a){const o=document.querySelector(`${e}`);o?.showModal(),o?.addEventListener("keydown",(function(e){!function(e,t,n=s){if("Tab"===t.code){const s=e.querySelectorAll("*");let a=Array.from(s).filter((e=>e.matches(n)));const o=document.querySelector(":focus")||document.activeElement,i=a.length;if(null==o)return;const r=a.indexOf(o);t.shiftKey?0===r&&(a[i-1]?.focus(),t.preventDefault()):r===i-1&&(a[0]?.focus(),t.preventDefault())}}(o,e)}));const i=document.querySelector(t);setTimeout((()=>{i?.focus()}),0),i?.addEventListener("click",(()=>{!function(e){e?.close()}(o),r(a)}));const l=document.querySelector(n);l?.addEventListener("click",(()=>{r(a)})),o?.addEventListener("keydown",(function(e){"Escape"===e.key&&r(a)}))}(document.activeElement)}))}))}function r(e){e.focus(),e?.scrollIntoView({block:"center"})}const l=document.querySelectorAll('a[href^=http]:not(.noBump), [onclick*="http"]');i(l),window.addEventListener("nfcu:links-added",(e=>{const t=e.detail;i(t?.links??l)}))}},5739:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});class s{name="image";init(){function e(){let e,t;$(".object-fit-container").each((function(){e=$(this),t=e.find("img").prop("src"),t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")}))}window.Modernizr.objectfit||(e(),$(".lazyload").on("load",(function(){e()})))}}},5780:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});const s={searchOverlayEnabled:!1,isSearchResultsPage:!1,selectors:{pageWrap:"page-wrap",classSearchOverlayMobile:"search-overlay_mobile",classSearchOverlayDesktop:"search-overlay_desktop",classNavSearchOverlay:"global-nav__nav_search-overlay",classSearchOverlay:"search-overlay",classSearchToggle:"search-toggle",globalNav:document.getElementsByClassName("global-nav")[0],globalNavInput:document.getElementById("q"),globalNavNavEl:document.getElementsByClassName("global-nav__nav")[0],searchResultsInput:document.getElementById("search-page-input"),pageWrap:document.getElementsByClassName("page-wrap")[0],searchOverlayMobile:document.getElementsByClassName("search-overlay_mobile")[0],searchOverlayDesktop:document.getElementsByClassName("search-overlay_desktop")[0],searchFormWrapper:document.querySelector(".search-bar_global-nav"),searchOverlayDiv:document.getElementsByClassName("search-overlay")[0],searchResultsElevatedComponents:[document.querySelector(".search-bar_page-component"),document.querySelector(".quickLinks")]},addMobileSearchOverlayStyles(){this.selectors.globalNavNavEl.classList.add(this.selectors.classNavSearchOverlay)},turnOverlayOn(e=!1,t=null){this.isSearchResultsPage=e;let n;n=window.innerWidth<780&&!e?document.getElementsByClassName(this.selectors.classSearchOverlayMobile)[0]:document.getElementsByClassName(this.selectors.classSearchOverlayDesktop)[0],n&&(n.classList.add("content-modal"),n.classList.add("open"),$(window).width()>=780&&this.selectors.globalNav.classList.add("overlay-open"),e&&(this.elevateComponents(),t&&(n.style.top=t)))},removeOverlays(){const e=document.getElementsByClassName(this.selectors.classSearchOverlay);for(const t of e)t?.classList.add("animateOut"),setTimeout((()=>{t?.classList.remove("animateOut","open"),this.selectors.globalNav.classList.contains("overlay-open")&&this.selectors.globalNav.classList.remove("overlay-open"),t&&(t.style.top=null),this.resetElevatedComponents()}),300)},elevateComponents(e=420){this.selectors.searchResultsElevatedComponents.forEach((t=>{if(!t)return;const n=t,s=window.getComputedStyle(n).position;"static"!==s&&s||(n.style.position="relative"),n.style.zIndex=e.toString(),e-=1}))},resetElevatedComponents(){this.selectors.searchResultsElevatedComponents.forEach((e=>{if(!e)return;const t=e,n=window.getComputedStyle(t).position;t.style.zIndex="","relative"===n&&(t.style.position="")}))},appendSearchOverlayDivs(){const e=document.getElementsByClassName(this.selectors.classSearchOverlayMobile)[0],t=document.getElementsByClassName(this.selectors.classSearchOverlayDesktop)[0];if(void 0===e){const e=document.createElement("div");e.classList.add(this.selectors.classSearchOverlay),e.classList.add(this.selectors.classSearchOverlayMobile),this.selectors.globalNavNavEl?.appendChild(e)}if(void 0===t){const e=document.createElement("div");e.classList.add(this.selectors.classSearchOverlay),e.classList.add(this.selectors.classSearchOverlayDesktop),this.selectors.pageWrap.appendChild(e)}},getSearchFormWrapperDisplayValue(){return this.selectors.searchFormWrapper.style.display},focusOnInput(){if(window.innerWidth<780){(this.isSearchResultsPage?this.selectors.searchResultsInput:this.selectors.globalNavInput).focus()}else if(this.isSearchResultsPage)this.selectors.searchResultsInput.focus();else{const e=document.getElementsByClassName(this.selectors.classSearchToggle)[0];e&&(e.click(),e.focus())}},addEventListeners(){if(!this.searchOverlayEnabled)return;const e=document.getElementsByClassName(this.selectors.classSearchOverlay);for(const t of e)t.addEventListener("click",(e=>{this.removeOverlays(),this.focusOnInput()}))},init(){this.searchOverlayEnabled=!0,this.appendSearchOverlayDivs(),this.addMobileSearchOverlayStyles(),this.addEventListeners()}}},5904:(e,t,n)=>{"use strict";function s(){const e=document.querySelector(".page-nav"),t=document.querySelector(".global-nav");let n=0;return window.innerWidth<780?e&&e.classList.contains("page-nav_fixed")?(n+=e.offsetHeight+t.offsetHeight,n):e?(n+=t.offsetHeight+2*e.offsetHeight,n):(n+=t.offsetHeight,n):e&&e.classList.contains("page-nav_fixed")?(n+=e.offsetHeight,n):e?(n+=2*e.offsetHeight,n):n}n.d(t,{w:()=>s})},5927:()=>{document.querySelector(".global-nav")&&window.lazySizes&&(window.lazySizes.cfg.loadHidden=!1)},6363:(e,t,n)=>{"use strict";n(9329)},7166:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a,r:()=>o});var s=n(5780);class a{selectors={auxSigninElement:document.querySelectorAll(".global-nav__signin-element"),auxSignoutElement:document.querySelectorAll(".global-nav__signout-element"),toolbarSignin:document.querySelector(".toolbar__section-content_signin"),toolbarSignout:document.querySelector(".toolbar__section-content_signout"),toolbarButtonSignin:document.querySelector(".toolbar__button_signin"),toolbarButtonSignout:document.querySelector(".toolbar__button_signout"),signIn:document.querySelector(".signin__section-content"),signOut:document.querySelector(".signin__section-content_signout"),signInMemberBar:document.querySelector(".signin__member-bar"),hasGlobalNav:document.querySelector(".global-nav"),hasHomepageToolbar:document.querySelector(".toolbar__signin-container"),hasHomepageSignIn:document.querySelector(".signin__container"),hasHomepageHero:document.querySelector(".homepage-hero__outer-wrapper"),hidenavenabled:document.querySelector("header#header")?.getAttribute("data-hidenav")};cookiesToRemove=["SMSESSION","navyfed-opentoken","failedcount","navyfed-useractive","navyfed-extracted","navyfed-deviceprint","navyfed-pingolb","navyfed-obo","my_dc","acctsvcs_dc"];getBrowserCookieNames(){return document.cookie.split(";").map((e=>e.split("=")[0].trim()))}getMatchingCookies(e){return e.filter((e=>this.cookiesToRemove.includes(e)))}removeCookies(e){this.getMatchingCookies(e).forEach((e=>{document.cookie=`${e}=; domain=.navyfederal.org; path=/; expires=Thu, 01-Jan-1970 00:00:00 GMT; secure;`}))}getCookie(e){let t;const n=document.cookie.split(`; ${e}=`);if(2===n.length)return t=n.pop()?.split(";").shift(),t}updateClassBasedOffMobCookie(e,t,n){const s=this.getCookie(t);if(void 0!==s){const t=document.querySelector(e);t?.classList.add(n)}if(void 0===s){const t=document.querySelector(e);t?.classList.remove(n)}}applyLoggedInExperience(e){let t;e?(this.selectors.hasGlobalNav&&(this.selectors.auxSigninElement.forEach((e=>{e.style.display="none"})),this.selectors.auxSignoutElement.forEach((e=>{e.style.display="block"}))),this.selectors.hasHomepageToolbar&&(this.selectors.toolbarSignin.style.display="none",this.selectors.toolbarSignout.style.display="block",this.selectors.toolbarButtonSignin.style.display="none",this.selectors.toolbarButtonSignout.style.display="block",this.selectors.signIn.style.display="none",this.selectors.signOut.style.display="block"),this.selectors.hasHomepageSignIn&&(this.selectors.signIn.style.display="none",this.selectors.signOut.style.display="block"),this.selectors.signInMemberBar&&(this.selectors.signInMemberBar.style.display="none")):(this.selectors.auxSigninElement.forEach((e=>{e.style.display="block"})),this.selectors.auxSignoutElement.forEach((e=>{e.style.display="none"})),t=this.getBrowserCookieNames(),this.removeCookies(t))}getUserLogInStatus(){let e;const t=this.getCookie("SMSESSION"),n=this.getCookie("failedcount");return e=void 0!==t&&"0"===n,e}init(){if(this.selectors.hasGlobalNav||this.selectors.hasHomepageToolbar||this.selectors.hasHomepageSignIn){let e=this.getUserLogInStatus();this.applyLoggedInExperience(e)}this.selectors.hidenavenabled&&(this.updateClassBasedOffMobCookie("#header","mob_platform","global-nav__hide-nav-element"),this.updateClassBasedOffMobCookie(".page-header","mob_platform","page-header__adjust-for-mobile"))}}const o={dom:{$globalNav:$(".global-nav"),$html:$("html"),$mainContent:$("#main-content"),$searchAndNavContainer:$(".global-nav__search-and-nav-container"),$signInBtn:$(".global-nav__signin-btn"),$sidebarTogglerCheckbox:$("#sidebartoggler"),globalNavSearchWrapper:document.querySelector(".search-bar_global-nav"),globalNav:"global-nav",hideNavElement:"global-nav__hide-nav-element",helpCenterContainer:document.querySelector(".search-bar__extra-links-container"),globalNavEl:document.getElementsByClassName("global-nav")[0],mainEl:document.getElementById("main-content"),mobileLogoLink:"global-nav__logo-link_mobile",navLinks:"global-nav__link",searchBarLink:document.getElementsByClassName("search-bar__link")[0],searchAndNavContainer:"global-nav__search-and-nav-container",searchHeader:document.querySelector(".search-bar_global-nav .search-bar__container"),searchInput:document.getElementById("q"),searchSubmitBtn:document.querySelector(".search-bar_global-nav .search-bar__search-btn"),signInBtn:"global-nav__signin-btn",tier1Links:document.querySelectorAll(".global-nav__link_tier-1"),tier1DetailElements:"global-nav__links-container_tier-1",tier1Summaries:document.querySelectorAll(".global-nav__links-group-toggler_tier-1"),tier1Details:document.querySelectorAll(".global-nav__links-container_tier-1"),tier1DetailActive:".activeDetail1",tier1UnorderedList:"global-nav__nav-tier-1-unordered-list",tier2DetailActive:".activeDetail2",tier2DetailElements:"global-nav__links-container_tier-2",tier2SummaryElements:"global-nav__links-group-toggler_tier-2",tier2UnorderedListContainer:"global-nav__nav-tier-2-unordered-list-container",tier3UnorderedListInnerContainer:".global-nav__nav-tier-3-unordered-list-inner-container",tier3UnorderedListContainer:"global-nav__nav-tier-3-unordered-list-item",tier3UnorderedListContainerPaddingTop:"global-nav__tier-3-top-column-padding",tier3Link:"global-nav__link_tier-3",tier4Link:"global-nav__link_tier-4",featuredContent:"global-nav__featured-content-link",arrowKeysTrapFocusEventHandlerAdded:!1,inMobile:!0,menuBtnClickHandlerAdded:!1,labelBtnHTML:'<label for="sidebartoggler" class="global-nav__mobile-btn global-nav__mobile-btn_label" tabindex="0">\n\t\t\t\t\t\t\t<i class="fa fa-bars" aria-hidden="true"></i>\n\t\t\t\t\t\t</label>',menuBtnHTML:'<button for="sidebartoggler" aria-label="Expand the Main Menu" class="global-nav__mobile-btn global-nav__mobile-btn_button" aria-expanded="false"><i class="fa fa-bars global-nav__mobile-hamburger-icon" aria-hidden="true"></i></button>',classExtraLinksFadeStyles:"search-bar__extra-links-container_fade-styles",classExtraLinksBlock:"search-bar__extra-links-container_display_block",classGlobalNavExpanded:"global-nav__expanded",classNavOpen:"nav-open",classTier1Link:"global-nav__link_tier-1",classToggleAsLabel:"global-nav__mobile-btn_label",searchToggle:document.querySelector(".search-toggle")},replaceMenuLabelWithButton(){const e=document.getElementsByClassName(this.dom.classToggleAsLabel);e.length&&(e[0].outerHTML=this.dom.menuBtnHTML)},toggleSidebarCheckbox(){this.dom.$sidebarTogglerCheckbox.prop("checked",!this.dom.$sidebarTogglerCheckbox.prop("checked"))},addExpandedMenuProps(){$(".global-nav__mobile-btn").attr("aria-expanded","true").attr("aria-label","Collapse the Main Menu"),this.dom.$searchAndNavContainer.attr("aria-hidden","false"),this.dom.$html.addClass(this.dom.classNavOpen);document.getElementsByClassName(this.dom.globalNav)[0].classList.add(this.dom.classGlobalNavExpanded)},removeExpandedMenuProps(){$(".global-nav__mobile-btn").attr("aria-expanded","false").attr("aria-label","Expand the Main Menu"),this.dom.$searchAndNavContainer.attr("aria-hidden","true"),this.dom.$html.removeClass(this.dom.classNavOpen);document.getElementsByClassName(this.dom.globalNav)[0].classList.remove(this.dom.classGlobalNavExpanded)},removeAriaHiddenFromSearchAndNav(){document.getElementsByClassName(this.dom.searchAndNavContainer)[0].removeAttribute("aria-hidden")},closeNav(){const e=document.getElementById("sidebartoggler");if(e?.checked&&this.dom.inMobile){let e=$(".global-nav__mobile-btn");this.uncheckSidebarCheckbox(),this.removeExpandedMenuProps(),this.closeAllSubmenus(),e.focus();s.p.searchOverlayEnabled&&s.p.removeOverlays()}},escapeKeyClosesNav(){this.dom.$globalNav.on("keydown",(e=>{if("Escape"===e.code&&this.closeNav(),"Escape"===e.code&&!this.dom.inMobile){const e=document.getElementsByClassName(this.dom.tier2DetailElements);for(const t of e)t.removeAttribute("open")}}))},trapFocusInElement(e){const t=e.find("select, input, textarea, button, a").filter(":visible"),n=$(".global-nav__mobile-btn"),s=t.last();s.on("keydown",(function(e){"Tab"!==e.code||e.shiftKey||(e.preventDefault(),n.focus())})),n.on("keydown",(function(e){"Tab"===e.code&&e.shiftKey&&(e.preventDefault(),s.focus())}))},uncheckSidebarCheckbox(){this.dom.$sidebarTogglerCheckbox.prop("checked",!1)},skipToMainContent(e){this.dom.$mainContent.focus()},skipToSignInBtn(e){e.preventDefault(),this.dom.$signInBtn.focus()},closeDetailElementsNotClicked(e,t){for(const n of e)n!==t&&n.removeAttribute("open")},closeAllTier2DetailElements(){const e=document.getElementsByClassName(this.dom.tier2DetailElements);for(const t of e)t.removeAttribute("open")},revealActiveElement(e){const t=e;if(!document.getElementsByClassName(this.dom.globalNav)[0].classList.contains(this.dom.classGlobalNavExpanded))return;if("Tab"!==t.key)return;const n=window.innerHeight,s=document.activeElement?.getBoundingClientRect().bottom;if(s&&s>n){const e=s-n;document.getElementsByClassName("global-nav__search-and-nav-container")[0].scrollBy(0,e+10)}},openNavToActivePage(){const e=document.querySelector(this.dom.tier1DetailActive),t=document.querySelector(this.dom.tier2DetailActive);e&&(e?.hasAttribute("open")||e?.setAttribute("open","")),t&&(t?.hasAttribute("open")||t?.setAttribute("open",""))},closeAllSubmenus(){const e=document.getElementsByTagName("details");for(const t of e)t.open&&t.removeAttribute("open")},closeAllInactiveTier1Menus(){this.dom.tier1Details.forEach((e=>{e?.classList.contains("activeDetail1")?e.setAttribute("open",""):e.removeAttribute("open")}))},addAriaCurrentFalseAttrs(){const e=document.getElementsByClassName(this.dom.navLinks);for(const t of e)t.hasAttribute("aria-current")||t.setAttribute("aria-current","false")},removeFromTabbingOrder(e){document.getElementsByClassName(e)[0].setAttribute("tabindex","-1")},addBackToTabbingOrder(e){document.getElementsByClassName(e)[0].removeAttribute("tabindex")},addListenerToSearchField(){this.dom.searchInput.addEventListener("keyup",(e=>{("Tab"===e.code||e.shiftKey&&this.dom.inMobile)&&(this.addBackToTabbingOrder(this.dom.mobileLogoLink),this.addBackToTabbingOrder(this.dom.signInBtn))}))},respondToCheckbox(){this.dom.$sidebarTogglerCheckbox.prop("checked")?(this.addExpandedMenuProps(),this.trapFocusInElement(this.dom.$globalNav),this.openNavToActivePage(),this.removeFromTabbingOrder(this.dom.mobileLogoLink),this.removeFromTabbingOrder(this.dom.signInBtn),this.addListenerToSearchField()):(this.removeExpandedMenuProps(),this.closeAllSubmenus())},addEventListeners(){this.dom.$signInBtn.on("keydown",(e=>{const t=document.getElementById("sidebartoggler");"Tab"!==e.code||t?.checked||e.shiftKey||this.skipToMainContent(e)}));const e={$tabbable:$("#main-content").find("select, input, textarea, button, a").filter(":visible")}.$tabbable[0];$(e).on("keydown",(e=>{const t=$(".nav-open"),n=$(window).width()<780;"Tab"===e.key&&e.shiftKey&&!t.length&&n&&this.skipToSignInBtn(e)}));document.getElementsByClassName(this.dom.globalNav)[0].addEventListener("keyup",(e=>{this.revealActiveElement(e)}))},setMenuBtnClickHandler(){$(".global-nav__mobile-btn").on("click",(()=>{this.toggleSidebarCheckbox(),this.respondToCheckbox()})),this.dom.menuBtnClickHandlerAdded=!0},addToggleEventHandlerToDetailsTier2(){const e=document.getElementsByClassName(this.dom.tier2DetailElements);for(const t of e)t.addEventListener("toggle",(n=>{n.preventDefault(),t?.open&&(this.dom.inMobile||t.getAttribute("data-padding-top-fix")&&"false"!==t.getAttribute("data-padding-top-fix")||this.addPaddingTopTier3TopColumn(t),this.closeDetailElementsNotClicked(e,n.target))}))},addToggleEventHandlerToDetailsTier1(){const e=document.getElementsByClassName(this.dom.tier1DetailElements);for(const t of e)t.addEventListener("toggle",(n=>{n.preventDefault(),this.tabOnlyToVisibleLinks(),t?.open&&(this.closeDetailElementsNotClicked(e,n.target),this.closeAllTier2DetailElements())}))},addMouseoverEventHandlerToDetailsTier2(){const e=document.getElementsByClassName(this.dom.tier2SummaryElements);for(const t of e){const e=t;t.addEventListener("mouseover",(t=>{const n=e.parentNode;this.dom.inMobile||n?.open||n?.setAttribute("open","")}))}},addMouseoutEventHandlerToDetailsTier2(){const e=document.getElementsByClassName(this.dom.tier2UnorderedListContainer),t=document.getElementsByClassName(this.dom.tier2DetailElements);for(const n of e){n.addEventListener("mouseleave",(e=>{if(!this.dom.inMobile)for(const e of t)e?.open&&e?.removeAttribute("open")}))}},closeTier2DetailsOnFocusOut(){this.dom.globalNavEl?.addEventListener("keyup",(e=>{const t=e.target,n=!("Enter"!==e.key&&"Space"!==e.key||!t?.classList.contains("global-nav__mobile-btn")),s=t?.parentNode,a=null!==s?.getAttribute("open"),o=t?.classList.contains(this.dom.tier2SummaryElements),i=t?.classList.contains(this.dom.tier3Link),r=t?.classList.contains(this.dom.tier4Link),l=t?.classList.contains(this.dom.featuredContent);i||r||l||n||o&&a||this.dom.inMobile||this.closeAllTier2DetailElements()}))},arrowKeysTrapFocus(e){let t;const n=e;"ArrowRight"===n.code||"ArrowDown"===n.code?(n.stopPropagation(),n.preventDefault(),t=document.activeElement?.parentElement?.parentElement?.nextElementSibling?.firstElementChild?.firstElementChild,n.target?.classList.contains(this.dom.classTier1Link)&&!this.dom.inMobile&&(t=document.activeElement?.parentElement?.parentElement?.parentElement?.nextElementSibling?.firstElementChild?.firstElementChild?.firstElementChild)):"ArrowLeft"!==n.code&&"ArrowUp"!==n.code||(n.stopPropagation(),n.preventDefault(),t=document.activeElement?.parentElement?.parentElement?.previousElementSibling?.firstElementChild?.firstElementChild,n.target?.classList.contains(this.dom.classTier1Link)&&!this.dom.inMobile&&(t=document.activeElement?.parentElement?.parentElement?.parentElement?.previousElementSibling?.firstElementChild?.firstElementChild?.firstElementChild)),t?.focus()},addArrowKeysEventHandler(){document.getElementsByClassName(this.dom.tier1UnorderedList)[0].addEventListener("keydown",(e=>{this.arrowKeysTrapFocus(e)})),this.dom.arrowKeysTrapFocusEventHandlerAdded=!0},setTier1KeyboardNavDesktop(){this.dom.tier1Links.forEach((e=>{e.removeAttribute("disabled"),e.removeAttribute("tabindex"),e.removeAttribute("aria-hidden")})),this.dom.tier1Summaries.forEach((e=>{e.setAttribute("tabindex","-1")}))},setTier1KeyboardNavMobile(){this.dom.tier1Links.forEach((e=>{e.setAttribute("disabled","true"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")})),this.dom.tier1Summaries.forEach((e=>{e.removeAttribute("tabindex")}))},tabOnlyToVisibleLinks(){const e=document.getElementsByClassName(this.dom.tier1DetailElements);for(const t of e){const e=t.hasAttribute("open"),n=t.querySelectorAll("ul")[0].querySelectorAll(`.${this.dom.tier2SummaryElements}`);e?n.forEach((e=>{e.removeAttribute("hidden")})):n.forEach((e=>{e.setAttribute("hidden","true")}))}},unhideSearchBarInMobile(){const e=document.querySelector(".search-bar_global-nav");this.dom.searchToggle.classList.contains("search-toggle_open")&&(this.dom.searchToggle.setAttribute("aria-label","Expand Search Field"),this.dom.searchToggle.innerHTML='<i class="fa fa-search" aria-hidden="true"></i>',this.dom.searchToggle.classList.remove("search-toggle_open")),e?.removeAttribute("style")},clickSearchClose(){this.dom.searchToggle?.click()},closeNavSearch(){const e=this.dom.searchInput,t=this.dom.searchBarLink,n=this.dom.searchSubmitBtn;this.dom.globalNavSearchWrapper?.addEventListener("keydown",(s=>{const a="Tab"===s.code&&!s.shiftKey,o="Tab"===s.code&&s.shiftKey;this.dom.inMobile||(a&&(s.target===t||s.target===n&&void 0===t)&&(this.clickSearchClose(),this.dom.mainEl?.focus()),s.target===e&&o&&(s.preventDefault(),this.dom.searchToggle?.focus()))}))},sendFocusToSearchInput(){let e=this.dom.searchToggle;e.addEventListener("keydown",(t=>{"Tab"===t.code&&!t.shiftKey&&e.classList.contains("search-toggle_open")&&(t.preventDefault(),this.dom.searchInput?.focus())}))},removeHelpCenterLink(){this.dom.helpCenterContainer&&(this.dom.helpCenterContainer?.classList.remove(this.dom.classExtraLinksFadeStyles),this.dom.helpCenterContainer?.classList.remove(this.dom.classExtraLinksBlock))},addHelpCenterEventListeners(){const e=document.getElementsByClassName(this.dom.globalNav)[0];e.addEventListener("keyup",(e=>{if(!this.dom.inMobile)return;const t=e.target;this.dom.searchHeader?.contains(t)||this.removeHelpCenterLink()})),e.addEventListener("click",(e=>{if(!this.dom.inMobile)return;const t=e.target;this.dom.searchHeader?.contains(t)||this.removeHelpCenterLink()}))},addPaddingTopTier3TopColumn(e){const t=document.querySelector(`${this.dom.tier3UnorderedListInnerContainer}`)?.getBoundingClientRect().top;if(e.hasAttribute("open")){const n=Array.from(e.getElementsByClassName(`${this.dom.tier3UnorderedListContainer}`));if(void 0!==t){const s=n[0].getBoundingClientRect().top,a=Math.abs(s-t);n.map((e=>{Math.abs(e.getBoundingClientRect().top-t)===a&&e.classList.add(`${this.dom.tier3UnorderedListContainerPaddingTop}`)})),e.setAttribute("data-padding-top-fix","true")}}},removeClassIfCookieNotPresent(e,t,n){if(void 0===(new a).getCookie(n)){const n=document.getElementById(e);n?.classList.remove(t)}},setSearchButtonAriaFalse(){const e=document.querySelector(".search-toggle"),t=e?.getAttribute("aria-expanded");t&&e?.setAttribute("aria-expanded","false")},mobileAndDesktopMethods(){this.addToggleEventHandlerToDetailsTier1(),this.addToggleEventHandlerToDetailsTier2(),this.addMouseoverEventHandlerToDetailsTier2(),this.addMouseoutEventHandlerToDetailsTier2(),this.escapeKeyClosesNav(),this.dom.arrowKeysTrapFocusEventHandlerAdded||this.addArrowKeysEventHandler(),this.tabOnlyToVisibleLinks(),this.closeNavSearch(),this.closeTier2DetailsOnFocusOut(),this.addHelpCenterEventListeners()},init(){const e=document.querySelectorAll(".global-nav");let t=window.innerWidth;e.length&&(document.addEventListener("DOMContentLoaded",(e=>{t=window.innerWidth;t<780?(this.dom.inMobile=!0,this.replaceMenuLabelWithButton(),this.addAriaCurrentFalseAttrs(),this.addEventListeners(),this.dom.menuBtnClickHandlerAdded||this.setMenuBtnClickHandler(),this.closeNav(),this.setTier1KeyboardNavMobile(),this.removeClassIfCookieNotPresent("header",this.dom.hideNavElement,"mob_platform")):(this.dom.inMobile=!1,this.setTier1KeyboardNavDesktop(),this.sendFocusToSearchInput()),this.mobileAndDesktopMethods()})),window.addEventListener("resize",(()=>{t=window.innerWidth;t<780?(this.dom.inMobile=!0,this.replaceMenuLabelWithButton(),this.addEventListeners(),this.unhideSearchBarInMobile(),this.dom.menuBtnClickHandlerAdded||this.setMenuBtnClickHandler(),this.setTier1KeyboardNavMobile(),this.setSearchButtonAriaFalse()):(this.dom.inMobile=!1,this.setTier1KeyboardNavDesktop(),this.sendFocusToSearchInput(),this.closeAllInactiveTier1Menus(),this.closeAllTier2DetailElements(),this.removeAriaHiddenFromSearchAndNav())})),window.onbeforeunload=()=>{this.dom.inMobile&&this.closeNav()})}};n(5927)},8446:e=>{!function(t,n,s,a){var o=[],i={_version:"3.12.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},r=function(){};r.prototype=i,r=new r;var l=[];function c(e,t){return typeof e===t}var d=s.documentElement,u="svg"===d.nodeName.toLowerCase();u||function(t,n){var s,a,o=t.html5||{},i=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,r=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,l="_html5shiv",c=0,d={};function u(){var e=p.elements;return"string"==typeof e?e.split(" "):e}function h(e){var t=d[e[l]];return t||(t={},c++,e[l]=c,d[c]=t),t}function g(e,t,s){return t||(t=n),a?t.createElement(e):(s||(s=h(t)),!(o=s.cache[e]?s.cache[e].cloneNode():r.test(e)?(s.cache[e]=s.createElem(e)).cloneNode():s.createElem(e)).canHaveChildren||i.test(e)||o.tagUrn?o:s.frag.appendChild(o));var o}function m(e){e||(e=n);var t=h(e);return!p.shivCSS||s||t.hasCSS||(t.hasCSS=!!function(e,t){var n=e.createElement("p"),s=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",s.insertBefore(n.lastChild,s.firstChild)}(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),a||function(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return p.shivMethods?g(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+u().join().replace(/[\w\-:]+/g,(function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'}))+");return n}")(p,t.frag)}(e,t),e}!function(){try{var e=n.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,a=1==e.childNodes.length||function(){n.createElement("a");var e=n.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){s=!0,a=!0}}();var p={elements:o.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3",shivCSS:!1!==o.shivCSS,supportsUnknownElements:a,shivMethods:!1!==o.shivMethods,type:"default",shivDocument:m,createElement:g,createDocumentFragment:function(e,t){if(e||(e=n),a)return e.createDocumentFragment();for(var s=(t=t||h(e)).frag.cloneNode(),o=0,i=u(),r=i.length;o<r;o++)s.createElement(i[o]);return s},addElements:function(e,t){var n=p.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),p.elements=n+" "+e,m(t)}};t.html5=p,m(n),e.exports&&(e.exports=p)}(void 0!==n?n:this,s);var h="Moz O ms Webkit",g=i._config.usePrefixes?h.split(" "):[];function m(){return"function"!=typeof s.createElement?s.createElement(arguments[0]):u?s.createElementNS.call(s,"http://www.w3.org/2000/svg",arguments[0]):s.createElement.apply(s,arguments)}i._cssomPrefixes=g;var p={elem:m("modernizr")};r._q.push((function(){delete p.elem}));var f={style:p.elem.style};function b(e,t,n,a){var o,i,r,l,c="modernizr",h=m("div"),g=function(){var e=s.body;return e||((e=m(u?"svg":"body")).fake=!0),e}();if(parseInt(n,10))for(;n--;)(r=m("div")).id=a?a[n]:c+(n+1),h.appendChild(r);return(o=m("style")).type="text/css",o.id="s"+c,(g.fake?g:h).appendChild(o),g.appendChild(h),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(s.createTextNode(e)),h.id=c,g.fake&&(g.style.background="",g.style.overflow="hidden",l=d.style.overflow,d.style.overflow="hidden",d.appendChild(g)),i=t(h,e),g.fake&&g.parentNode?(g.parentNode.removeChild(g),d.style.overflow=l,d.offsetHeight):h.parentNode.removeChild(h),!!i}function v(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function y(e,t){var s=e.length;if("CSS"in n&&"supports"in n.CSS){for(;s--;)if(n.CSS.supports(v(e[s]),t))return!0;return!1}if("CSSSupportsRule"in n){for(var o=[];s--;)o.push("("+v(e[s])+":"+t+")");return b("@supports ("+(o=o.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===function(e,t,s){var a;if("getComputedStyle"in n){a=getComputedStyle.call(n,e,t);var o=n.console;null!==a?s&&(a=a.getPropertyValue(s)):o&&o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=!t&&e.currentStyle&&e.currentStyle[s];return a}(e,null,"position")}))}return a}function _(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}r._q.unshift((function(){delete f.style}));var S=i._config.usePrefixes?h.toLowerCase().split(" "):[];function E(e,t){return function(){return e.apply(t,arguments)}}function k(e,t,n,s,o){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+g.join(i+" ")+i).split(" ");return c(t,"string")||c(t,"undefined")?function(e,t,n,s){if(s=!c(s,"undefined")&&s,!c(n,"undefined")){var o=y(e,n);if(!c(o,"undefined"))return o}for(var i,r,l,d,u,h=["modernizr","tspan","samp"];!f.style&&h.length;)i=!0,f.modElem=m(h.shift()),f.style=f.modElem.style;function g(){i&&(delete f.style,delete f.modElem)}for(l=e.length,r=0;r<l;r++)if(d=e[r],u=f.style[d],~(""+d).indexOf("-")&&(d=_(d)),f.style[d]!==a){if(s||c(n,"undefined"))return g(),"pfx"!==t||d;try{f.style[d]=n}catch(e){}if(f.style[d]!==u)return g(),"pfx"!==t||d}return g(),!1}(r,t,s,o):function(e,t,n){var s;for(var a in e)if(e[a]in t)return!1===n?e[a]:c(s=t[e[a]],"function")?E(s,n||t):s;return!1}(r=(e+" "+S.join(i+" ")+i).split(" "),t,n)}i._domPrefixes=S,i.testAllProps=k;var C=function(e){var t,s=prefixes.length,o=n.CSSRule;if(void 0===o)return a;if(!e)return!1;if((t=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in o)return"@"+e;for(var i=0;i<s;i++){var r=prefixes[i];if(r.toUpperCase()+"_"+t in o)return"@-"+r.toLowerCase()+"-"+e}return!1};i.atRule=C;var L=i.prefixed=function(e,t,n){return 0===e.indexOf("@")?C(e):(-1!==e.indexOf("-")&&(e=_(e)),t?k(e,t,n):k(e,"pfx"))};function w(e,t,n){return k(e,a,a,t,n)}r.addTest("objectfit",!!L("objectFit"),{aliases:["object-fit"]}),i.testAllProps=w,r.addTest("flexbox",w("flexBasis","1px",!0)),function(){var e,t,n,s,a,i;for(var d in o)if(o.hasOwnProperty(d)){if(e=[],(t=o[d]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(s=c(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)1===(i=e[a].split(".")).length?r[i[0]]=s:(r[i[0]]&&(!r[i[0]]||r[i[0]]instanceof Boolean)||(r[i[0]]=new Boolean(r[i[0]])),r[i[0]][i[1]]=s),l.push((s?"":"no-")+i.join("-"))}}(),function(e){var t=d.className,n=r._config.classPrefix||"";if(u&&(t=t.baseVal),r._config.enableJSClass){var s=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(s,"$1"+n+"js$2")}r._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),u?d.className.baseVal=t:d.className=t)}(l),delete i.addTest,delete i.addAsyncTest;for(var A=0;A<r._q.length;A++)r._q[A]();t.Modernizr=r}(window,window,document)},8827:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});const s={init(){$("#main-content").after('<button class="back-to-top">\n      <i class="fa fa-angle-up" aria-hidden="true"></i>\n      <span class="sr-only">Back to </span> top\n     </button>');const e=1e3,t={$backToTopBtn:$(".back-to-top"),$mainConent:$("#main-content"),$htmlBody:$("html, body")};$(window).scrollTop()>=250&&t.$backToTopBtn.fadeIn(e),$(window).on("scroll",(function(){$(window).scrollTop()>=250?t.$backToTopBtn.fadeIn(e):t.$backToTopBtn.fadeOut(e)})),t.$backToTopBtn.on("click",(function(e){e.preventDefault(),$("#alert-top").length||t.$mainConent.prepend('<span id="alert-top" class="sr-only"> \n          You are now at the top of the page. \n         </span>'),t.$htmlBody.animate({scrollTop:0}),t.$mainConent.trigger("focus"),setTimeout((()=>$("#alert-top").remove()),8e3)}))}}},8975:(e,t,n)=>{"use strict";n.d(t,{W:()=>s.A});var s=n(9418)},9329:(e,t,n)=>{!function e(t,n,s){function a(i,r){if(!n[i]){if(!t[i]){if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,(function(e){var n=t[i][1][e];return a(n||e)}),c,c.exports,e,t,n,s)}return n[i].exports}for(var o=void 0,i=0;i<s.length;i++)a(s[i]);return a}({1:[function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getCookieExpiresString",value:function(e){var t=new Date,n=new Date(t.getTime()+e);return"expires=".concat(n.toGMTString(),";")}},{key:"bake",value:function(t,n){document.cookie="smartbanner_exited=1; ".concat(t?e.getCookieExpiresString(t):""," path=").concat(n)}},{key:"unbake",value:function(){document.cookie="smartbanner_exited=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"baked",get:function(){return"1"===document.cookie.replace(/(?:(?:^|.*;\s*)smartbanner_exited\s*=\s*([^;]*).*$)|^.*$/,"$1")}}],(n=null)&&s(t.prototype,n),a&&s(t,a),e}();n.default=a},{}],2:[function(e,t,s){(function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}var s,a,o;return s=n,o=[{key:"platform",value:function(){return/iPhone|iPad|iPod/i.test(window.navigator.userAgent)?"ios":/Android/i.test(window.navigator.userAgent)?"android":void 0}},{key:"userAgentMatchesRegex",value:function(e){return new RegExp(e).test(window.navigator.userAgent)}},{key:"jQueryMobilePage",value:function(){return void 0!==e.$&&"undefined"!==e.$.mobile&&null!==document.querySelector(".ui-page")}},{key:"wrapperElement",value:function(){var e=n.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(e)}}],(a=null)&&t(s.prototype,a),o&&t(s,o),n}();s.default=n}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";var s,a=(s=e("./smartbanner.js"))&&s.__esModule?s:{default:s};window.addEventListener("load",(function(){(new a.default).publish()}))},{"./smartbanner.js":5}],4:[function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"parse",value:function(){var e=document.getElementsByTagName("meta"),t={},n=null;return Array.from(e).forEach((function(e){var s=e.getAttribute("name"),a=e.getAttribute("content");s&&a&&function(e){return-1!==e.indexOf("smartbanner:")&&e.split(":")[1].length>0}(s)&&a.length>0&&(-1!==(n=s.split(":")[1]).indexOf("-")&&(n=function(e){var t=e.split("-");return t.map((function(e,n){n>0&&(t[n]=e.charAt(0).toUpperCase()+e.substring(1))})),t.join("")}(n)),t[n]=a)})),t}}])&&s(t.prototype,n),a&&s(t,a),e}();n.default=a},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(e("./optionparser.js")),a=i(e("./detector.js")),o=i(e("./bakery.js"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var l={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"};function c(e){this.positioningDisabled||d(e.data.height)}function d(e){for(var t,n=a.default.wrapperElement(),s=0,o=n.length;s<o;s++)if(t=n[s],a.default.jQueryMobilePage()){if(t.getAttribute(l.originalTop))continue;var i=parseFloat(getComputedStyle(t).top);t.setAttribute(l.originalTop,isNaN(i)?0:i),t.style.top=e+"px"}else{if(t.getAttribute(l.originalMarginTop))continue;var r=parseFloat(getComputedStyle(t).marginTop);t.setAttribute(l.originalMarginTop,isNaN(r)?0:r),t.style.marginTop=e+"px"}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=new s.default;this.options=t.parse(),this.platform=a.default.platform()}var t,n,i;return t=e,(n=[{key:"publish",value:function(){if(0===Object.keys(this.options).length)throw new Error("No options detected. Please consult documentation.");if(o.default.baked)return!1;if(this.userAgentExcluded)return!1;if(!this.platformEnabled&&!this.userAgentIncluded)return!1;var e=document.createElement("div");document.querySelector(".page-wrap").prepend(e),e.outerHTML=this.html,this.positioningDisabled||d(this.height),function(e){document.querySelector(".js_smartbanner__exit").addEventListener("click",(function(t){return function(e,t){t.exit(),e.preventDefault()}(t,e)})),a.default.jQueryMobilePage()&&$(document).on("pagebeforeshow",e,c)}(this)}},{key:"exit",value:function(){a.default.jQueryMobilePage()&&$(document).off("pagebeforeshow",c),this.positioningDisabled||function(){for(var e,t=a.default.wrapperElement(),n=0,s=t.length;n<s;n++)e=t[n],a.default.jQueryMobilePage()&&e.getAttribute(l.originalTop)?e.style.top=e.getAttribute(l.originalTop)+"px":e.getAttribute(l.originalMarginTop)&&(e.style.marginTop=e.getAttribute(l.originalMarginTop)+"px")}();var e=document.querySelector(".js_smartbanner");document.querySelector(".page-wrap").removeChild(e),o.default.bake(this.hideTtl,this.hidePath)}},{key:"originalTop",get:function(){var e=a.default.wrapperElement()[0];return parseFloat(e.getAttribute(l.originalTop))}},{key:"originalTopMargin",get:function(){var e=a.default.wrapperElement()[0];return parseFloat(e.getAttribute(l.originalMarginTop))}},{key:"priceSuffix",get:function(){return"ios"===this.platform?this.options.priceSuffixApple:"android"===this.platform?this.options.priceSuffixGoogle:""}},{key:"icon",get:function(){return"android"===this.platform?this.options.iconGoogle:this.options.iconApple}},{key:"buttonUrl",get:function(){return"android"===this.platform?this.options.buttonUrlGoogle:"ios"===this.platform?this.options.buttonUrlApple:"#"}},{key:"html",get:function(){var e=this.options.customDesignModifier?this.options.customDesignModifier:this.platform;return'<div role="complementary" aria-label="android app banner" class="smartbanner smartbanner--'.concat(e,' js_smartbanner">\n      <a aria-label="close app banner" href="javascript:void();" class="smartbanner__exit js_smartbanner__exit"></a>\n      <div class="smartbanner__icon" style="background-image: url(').concat(this.icon,');"></div>\n      <div class="smartbanner__info">\n        <div>\n          <div role="heading" aria-level="2" class="smartbanner__info__title">').concat(this.options.title,'</div>\n          <div class="smartbanner__info__author">').concat(this.options.author,'</div>\n          <div class="smartbanner__info__price">').concat(this.options.price).concat(this.priceSuffix,'</div>\n      </div>\n      <a aria-label="view navy federal credit union app in google play store" href="').concat(this.buttonUrl,'" target="_blank" class="smartbanner__button"><span class="smartbanner__button__label">').concat(this.options.button,"</span></a>\n      </div>\n       </div>")}},{key:"height",get:function(){var e=document.querySelector(".js_smartbanner").offsetHeight;return void 0!==e?e:0}},{key:"platformEnabled",get:function(){var e=this.options.enabledPlatforms||"android,ios";return e&&-1!==e.replace(/\s+/g,"").split(",").indexOf(this.platform)}},{key:"positioningDisabled",get:function(){return"true"===this.options.disablePositioning}},{key:"userAgentExcluded",get:function(){return!!this.options.excludeUserAgentRegex&&a.default.userAgentMatchesRegex(this.options.excludeUserAgentRegex)}},{key:"userAgentIncluded",get:function(){return!!this.options.includeUserAgentRegex&&a.default.userAgentMatchesRegex(this.options.includeUserAgentRegex)}},{key:"hideTtl",get:function(){return!!this.options.hideTtl&&parseInt(this.options.hideTtl)}},{key:"hidePath",get:function(){return this.options.hidePath?this.options.hidePath:"/"}}])&&r(t.prototype,n),i&&r(t,i),e}();n.default=u},{"./bakery.js":1,"./detector.js":2,"./optionparser.js":4}]},{},[3])}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,n,a,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],r=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,o<i&&(i=o));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.j=409,(()=>{var e={409:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,r,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(t&&t(n);c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=globalThis.webpackChunkaem_nfo_ui_frontend=globalThis.webpackChunkaem_nfo_ui_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=s.O(void 0,[67],(()=>s(7901)));a=s.O(a)})();